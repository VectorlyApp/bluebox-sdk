[
  {
    "role": "system",
    "content": "\n    You are a helpful assistant that is an expert in parsing network traffic.\n    You need to identify one or more network transactions that directly correspond to the user's requested task.\n    You have access to vectorstore that contains network transactions and storage data\n    (cookies, localStorage, sessionStorage, etc.).\n    "
  },
  {
    "role": "user",
    "content": "Task description: recover the spirit one way flight option and price api"
  },
  {
    "role": "user",
    "content": "These are the possible network transaction ids you can choose from: ['20251030_1761863980617_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863968610_collector-pxkp4clsb5.px-cloud.net_api_v2_collector', '20251030_1761863992134_www.spirit.com_api_prod-availability_api_availability_v2_lowfare', '20251030_1761863969444_collector-pxkp4clsb5.px-cloud.net_api_v2_collector', '20251030_1761863968655_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863971857_bf04820crc.bf.dynatrace.com_bf', '20251030_1761863967634_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863977978_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863969655_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token', '20251030_1761863970672_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_kG9DcwSi_SloPQVEoKw8_a0Q0Y_VpPBkhkAQ', '20251030_1761863973741_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863967901_content.spirit.com_api_content_en-US', '20251030_1761863973061_collector-pxkp4clsb5.px-cloud.net_api_v2_collector', '20251030_1761863994486_bf04820crc.bf.dynatrace.com_bf', '20251030_1761863967911_content.spirit.com_api_content_en-US', '20251030_1761863978282_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_kG9DcwSi_SloPQVEoKw8_a0Q0Y_VpPBkhkAQ', '20251030_1761863970591_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863967972_p11.techlab-cdn.com_h_b90dea8b4dec42619841bf216443707a', '20251030_1761863969778_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_kG9DcwSi_SloPQVEoKw8_a0Q0Y_VpPBkhkAQ', '20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search', '20251030_1761863976683_www.spirit.com_api_prod-availability_api_Calendar_availableDates', '20251030_1761863967772_content.spirit.com_api_content_en-US', '20251030_1761863992676_www.spirit.com_assets_i18n_shared_en-US.json', '20251030_1761863992744_content.spirit.com_api_content_en-US', '20251030_1761863992683_www.spirit.com_assets_i18n_flight-search-widget_en-US.json', '20251030_1761863967890_www.spirit.com_assets_i18n_shared_en-US.json', '20251030_1761863992734_content.spirit.com_api_content_en-US', '20251030_1761863967894_www.spirit.com_assets_i18n_flight-search-widget_en-US.json', '20251030_1761863985315_www.spirit.com_3f-DnSRa1b_P2cN4Z_f2FL_iS9DcwSiJEOYb4_CjgEQVEoKw8_L3MfW_GoPA1A', '20251030_1761863967908_content.spirit.com_api_content_en-US', '20251030_1761863967669_collector-pxkp4clsb5.px-cloud.net_api_v2_collector', '20251030_1761863997680_bf04820crc.bf.dynatrace.com_bf', '20251030_1761863967886_www.spirit.com_api_prod-station_api_resources_v2_stations', '20251030_1761863968177_content.spirit.com_api_content_en-US', '20251030_1761863992750_content.spirit.com_api_content_en-US', '20251030_1761863967655_tzm.px-cloud.net_ns', '20251030_1761863992730_content.spirit.com_api_content_en-US', '20251030_1761863971827_bf04820crc.bf.dynatrace.com_bf', '20251030_1761863992477_content.spirit.com_api_content_en-US', '20251030_1761863969842_bf04820crc.bf.dynatrace.com_bf', '20251030_1761863992480_www.spirit.com_assets_i18n_shared_en-US.json', '20251030_1761863967913_content.spirit.com_api_content_en-US', '20251030_1761863976688_www.spirit.com_api_prod-apo_api_apo', '20251030_1761863967898_content.spirit.com_api_content_en-US', '20251030_1761863992726_www.spirit.com_api_prod-station_api_resources_carriers', '20251030_1761863992474_www.spirit.com_api_prod-token_api_v1_token', '20251030_1761863991858_www.spirit.com_api_prod-booking_api_booking_reset', '20251030_1761863967905_content.spirit.com_api_content_en-US', '20251030_1761863988901_collector-pxkp4clsb5.px-cloud.net_api_v2_collector', '20251030_1761863992483_www.spirit.com_assets_i18n_book-path_en-US.json', '20251030_1761863992679_www.spirit.com_assets_i18n_flight_en-US.json']"
  },
  {
    "role": "user",
    "content": "Please respond in the following format: {'$defs': {'ConfidenceLevel': {'enum': ['high', 'medium', 'low'], 'title': 'ConfidenceLevel', 'type': 'string'}, 'Method': {'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'HEAD', 'OPTIONS', 'TRACE', 'CONNECT'], 'title': 'Method', 'type': 'string'}}, 'description': \"Response from the LLM for identifying the network transaction that directly corresponds to\\nthe user's requested task. \", 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}, 'method': {'$ref': '#/$defs/Method'}, 'explanation': {'title': 'Explanation', 'type': 'string'}, 'confidence_level': {'$ref': '#/$defs/ConfidenceLevel'}}, 'required': ['transaction_id', 'description', 'url', 'method', 'explanation', 'confidence_level'], 'title': 'TransactionIdentificationResponse', 'type': 'object'}"
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'ConfidenceLevel': {'enum': ['high', 'medium', 'low'], 'title': 'ConfidenceLevel', 'type': 'string'}, 'Method': {'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'HEAD', 'OPTIONS', 'TRACE', 'CONNECT'], 'title': 'Method', 'type': 'string'}}, 'description': \"Response from the LLM for identifying the network transaction that directly corresponds to\\nthe user's requested task. \", 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}, 'method': {'$ref': '#/$defs/Method'}, 'explanation': {'title': 'Explanation', 'type': 'string'}, 'confidence_level': {'$ref': '#/$defs/ConfidenceLevel'}}, 'required': ['transaction_id', 'description', 'url', 'method', 'explanation', 'confidence_level'], 'title': 'TransactionIdentificationResponse', 'type': 'object', 'transaction_id': '20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search', 'description': 'Spirit Airlines Availability v3 search endpoint returning one-way flight options and prices.', 'url': 'https://www.spirit.com/api/prod-availability/api/availability/v3/search', 'method': 'POST', 'explanation': 'This POST to the availability v3 search endpoint includes a single-day date window (beginDate and endDate both 2025-10-31) with origin BOS, destination MIA, and 1 adult, which corresponds to a one-way availability query that returns flight options and pricing, as captured in the request payload and 200 response . A separate low-fare calendar endpoint exists (v2/lowfare) used for calendar fare ranges rather than listing flight options, which is why v3/search is the direct match for one-way options and prices .', 'confidence_level': 'high'}"
  },
  {
    "role": "assistant",
    "content": "{\"transaction_id\":\"20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search\",\"description\":\"Spirit Airlines Availability v3 search endpoint returning one-way flight options and prices.\",\"url\":\"https://www.spirit.com/api/prod-availability/api/availability/v3/search\",\"method\":\"POST\",\"explanation\":\"This POST to the availability v3 search endpoint includes a single-day date window (beginDate and endDate both 2025-10-31) with origin BOS, destination MIA, and 1 adult, which corresponds to a one-way availability query that returns flight options and pricing, as captured in the request payload and 200 response . A separate low-fare calendar endpoint exists (v2/lowfare) used for calendar fare ranges rather than listing flight options, which is why v3/search is the direct match for one-way options and prices .\",\"confidence_level\":\"high\"}"
  },
  {
    "role": "user",
    "content": "20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search have been added to the vectorstore in full (including response bodies).Please confirm that the identified transaction is correct and that it directly corresponds to the user's requested task:recover the spirit one way flight option and price apiPlease respond in the following format: {'$defs': {'ConfidenceLevel': {'enum': ['high', 'medium', 'low'], 'title': 'ConfidenceLevel', 'type': 'string'}}, 'description': \"Response obejct for confirming the identified network transactions that directly correspond to\\nthe user's requested task.\", 'properties': {'is_correct': {'title': 'Is Correct', 'type': 'boolean'}, 'confirmed_transaction_id': {'title': 'Confirmed Transaction Id', 'type': 'string'}, 'explanation': {'title': 'Explanation', 'type': 'string'}, 'confidence_level': {'$ref': '#/$defs/ConfidenceLevel'}}, 'required': ['is_correct', 'confirmed_transaction_id', 'explanation', 'confidence_level'], 'title': 'TransactionConfirmationResponse', 'type': 'object'}"
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'ConfidenceLevel': {'enum': ['high', 'medium', 'low'], 'title': 'ConfidenceLevel', 'type': 'string'}}, 'description': \"Response obejct for confirming the identified network transactions that directly correspond to\\nthe user's requested task.\", 'properties': {'is_correct': {'title': 'Is Correct', 'type': 'boolean'}, 'confirmed_transaction_id': {'title': 'Confirmed Transaction Id', 'type': 'string'}, 'explanation': {'title': 'Explanation', 'type': 'string'}, 'confidence_level': {'$ref': '#/$defs/ConfidenceLevel'}}, 'required': ['is_correct', 'confirmed_transaction_id', 'explanation', 'confidence_level'], 'title': 'TransactionConfirmationResponse', 'type': 'object', 'is_correct': true, 'confirmed_transaction_id': '20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search', 'explanation': 'Yes. This POST to https://www.spirit.com/api/prod-availability/api/availability/v3/search contains a single-day search window (beginDate == endDate) with origin/destination and passenger details, which is Spiritâ€™s one-way availability search that returns flight options and their prices.', 'confidence_level': 'high'}"
  },
  {
    "role": "user",
    "content": "Please extract the variables from the requests of identified network transactions: [{'request': {'requestId': '5580.247', 'url': 'https://www.spirit.com/api/prod-availability/api/availability/v3/search', 'method': 'POST', 'type': 'XHR', 'requestHeaders': {'sec-ch-ua-platform': '\"macOS\"', 'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'Cache-Control': 'no-cache', 'Referer': 'https://www.spirit.com/', 'Accept-Language': 'en-US', 'Pragma': 'no-cache', 'sec-ch-ua': '\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"', 'sec-ch-ua-mobile': '?0', 'Ocp-Apim-Subscription-Key': '3b6a6994753b4efc86376552e52b8432', 'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'}, 'postData': '{\"includeWifiAvailability\":true,\"criteria\":[{\"stations\":{\"originStationCodes\":[\"BOS\"],\"destinationStationCodes\":[\"MIA\"],\"searchDestinationMacs\":false},\"dates\":{\"beginDate\":\"2025-10-31\",\"endDate\":\"2025-10-31\"},\"filters\":{\"filter\":\"Default\"}}],\"passengers\":{\"types\":[{\"type\":\"ADT\",\"count\":1}]},\"codes\":{\"currency\":\"USD\"},\"fareFilters\":{\"loyalty\":\"MonetaryOnly\",\"types\":[],\"classControl\":1},\"taxesAndFees\":\"TaxesAndFees\",\"originalJourneyKeys\":[],\"originalBookingRecordLocator\":null,\"infantCount\":0,\"birthDates\":[],\"includeBundleAvailability\":true}'}}]Please respond in the following format: {'$defs': {'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for extracting variables from the network transaction.', 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'variables': {'items': {'$ref': '#/$defs/Variable'}, 'title': 'Variables', 'type': 'array'}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['transaction_id', 'variables', 'explanation'], 'title': 'ExtractedVariableResponse', 'type': 'object'}Mark each variable with requires_resolution=True if we need to dynamically resolve this variable at runtime.If we can most likely hardcode this value, mark requires_resolution=False.system variables are related to the device or browser environment, and are not used to identify the user.token and cookie values are not used to identify the user: these may need to be resolved at runtime.Only the actual values of the variables (token/cookies, etc.) should be placed into the observed_value field.The values of values_to_scan_for will then be used to scan the storage and transactions for the source of the variable so only include the actual values of the variables.values_to_scan_for should be possible substrings that will likely be present in the response body of a network transaction or a storage entry value.This is necessary to figure out where the variable is coming from."
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for extracting variables from the network transaction.', 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'variables': {'items': {'$ref': '#/$defs/Variable'}, 'title': 'Variables', 'type': 'array'}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['transaction_id', 'variables', 'explanation'], 'title': 'ExtractedVariableResponse', 'type': 'object', 'transaction_id': '20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search', 'variables': [{'type': 'token', 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'eyJhbGciOiJSUzI1NiIsInR5cCI6Ik', 'KZYU5d88-7MUiPQ16Dt3', 'U1NJLjIifQ.bw8vxEnKZYU5d88', 'Zm9ydmF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ'], 'description': 'Bearer JWT used to authorize the availability search request. Expires and must be dynamically obtained.'}, {'type': 'token', 'requires_resolution': False, 'name': 'Ocp-Apim-Subscription-Key', 'observed_value': '3b6a6994753b4efc86376552e52b8432', 'values_to_scan_for': ['3b6a6994753b4efc86376552e52b8432', '3b6a6994', '52e52b8432'], 'description': 'Public subscription key sent with Spirit APIs. Typically static for the web app; can often be hardcoded.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'originStationCode', 'observed_value': 'BOS', 'values_to_scan_for': ['BOS'], 'description': 'Origin IATA station code for one-way search.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'destinationStationCode', 'observed_value': 'MIA', 'values_to_scan_for': ['MIA'], 'description': 'Destination IATA station code for one-way search.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'beginDate', 'observed_value': '2025-10-31', 'values_to_scan_for': ['2025-10-31'], 'description': 'Departure date (start of search window).'}, {'type': 'argument', 'requires_resolution': True, 'name': 'endDate', 'observed_value': '2025-10-31', 'values_to_scan_for': ['2025-10-31'], 'description': 'Departure date (end of search window). Same as beginDate for one-way single-day search.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'searchDestinationMacs', 'observed_value': 'false', 'values_to_scan_for': ['false'], 'description': 'Flag in stations block; false in observed request.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'filters.filter', 'observed_value': 'Default', 'values_to_scan_for': ['Default'], 'description': 'Top-level criteria filter mode.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'passengerType', 'observed_value': 'ADT', 'values_to_scan_for': ['ADT'], 'description': 'Passenger type code (Adult).'}, {'type': 'argument', 'requires_resolution': True, 'name': 'passengerCount_ADT', 'observed_value': '1', 'values_to_scan_for': ['1'], 'description': 'Number of adult passengers.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'currency', 'observed_value': 'USD', 'values_to_scan_for': ['USD'], 'description': 'Pricing currency for the search results.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'fareFilters.loyalty', 'observed_value': 'MonetaryOnly', 'values_to_scan_for': ['MonetaryOnly'], 'description': 'Fare loyalty filter used for pricing results.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'fareFilters.classControl', 'observed_value': '1', 'values_to_scan_for': ['1'], 'description': 'Class control setting for fare filtering.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'taxesAndFees', 'observed_value': 'TaxesAndFees', 'values_to_scan_for': ['TaxesAndFees'], 'description': 'Specifies how taxes and fees are handled in pricing.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'infantCount', 'observed_value': '0', 'values_to_scan_for': ['0'], 'description': 'Number of infants in the search.'}, {'type': 'argument', 'requires_resolution': True, 'name': 'birthDates', 'observed_value': '[]', 'values_to_scan_for': ['[]'], 'description': 'Birthdates array for age-based pricing; empty in observed request.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'includeBundleAvailability', 'observed_value': 'true', 'values_to_scan_for': ['true'], 'description': 'Whether to include bundle availability in the search results.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'includeWifiAvailability', 'observed_value': 'true', 'values_to_scan_for': ['true'], 'description': 'Whether to include Wi-Fi availability in the search results.'}, {'type': 'argument', 'requires_resolution': False, 'name': 'originalJourneyKeys', 'observed_value': '[]', 'values_to_scan_for': ['[]'], 'description': 'Original journey keys (empty for new search).'}, {'type': 'argument', 'requires_resolution': False, 'name': 'originalBookingRecordLocator', 'observed_value': 'null', 'values_to_scan_for': ['null'], 'description': 'Original booking record locator (null for new search).'}], 'explanation': 'Variables were extracted from the request headers and JSON body of the identified v3/search POST. Dynamic items like Authorization token, stations, dates, passenger counts, and currency are marked requires_resolution=True. Static flags and configuration-like values (e.g., subscription key, filter modes, includeBundleAvailability) are marked requires_resolution=False. values_to_scan_for include actual values or distinctive substrings to locate the sources of these variables in storage or other transactions.'}"
  },
  {
    "role": "assistant",
    "content": "{\"transaction_id\":\"20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search\",\"variables\":[{\"type\":\"token\",\"requires_resolution\":true,\"name\":\"AuthorizationBearerToken\",\"observed_value\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\",\"values_to_scan_for\":[\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9\",\"eyJhbGciOiJSUzI1NiIsInR5cCI6Ik\",\"KZYU5d88-7MUiPQ16Dt3\",\"U1NJLjIifQ.bw8vxEnKZYU5d88\",\"Zm9ydmF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ\"],\"description\":\"Bearer JWT used to authorize the availability search request. Expires and must be dynamically obtained.\"},{\"type\":\"token\",\"requires_resolution\":false,\"name\":\"Ocp-Apim-Subscription-Key\",\"observed_value\":\"3b6a6994753b4efc86376552e52b8432\",\"values_to_scan_for\":[\"3b6a6994753b4efc86376552e52b8432\",\"3b6a6994\",\"52e52b8432\"],\"description\":\"Public subscription key sent with Spirit APIs. Typically static for the web app; can often be hardcoded.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"originStationCode\",\"observed_value\":\"BOS\",\"values_to_scan_for\":[\"BOS\"],\"description\":\"Origin IATA station code for one-way search.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"destinationStationCode\",\"observed_value\":\"MIA\",\"values_to_scan_for\":[\"MIA\"],\"description\":\"Destination IATA station code for one-way search.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"beginDate\",\"observed_value\":\"2025-10-31\",\"values_to_scan_for\":[\"2025-10-31\"],\"description\":\"Departure date (start of search window).\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"endDate\",\"observed_value\":\"2025-10-31\",\"values_to_scan_for\":[\"2025-10-31\"],\"description\":\"Departure date (end of search window). Same as beginDate for one-way single-day search.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"searchDestinationMacs\",\"observed_value\":\"false\",\"values_to_scan_for\":[\"false\"],\"description\":\"Flag in stations block; false in observed request.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"filters.filter\",\"observed_value\":\"Default\",\"values_to_scan_for\":[\"Default\"],\"description\":\"Top-level criteria filter mode.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"passengerType\",\"observed_value\":\"ADT\",\"values_to_scan_for\":[\"ADT\"],\"description\":\"Passenger type code (Adult).\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"passengerCount_ADT\",\"observed_value\":\"1\",\"values_to_scan_for\":[\"1\"],\"description\":\"Number of adult passengers.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"currency\",\"observed_value\":\"USD\",\"values_to_scan_for\":[\"USD\"],\"description\":\"Pricing currency for the search results.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"fareFilters.loyalty\",\"observed_value\":\"MonetaryOnly\",\"values_to_scan_for\":[\"MonetaryOnly\"],\"description\":\"Fare loyalty filter used for pricing results.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"fareFilters.classControl\",\"observed_value\":\"1\",\"values_to_scan_for\":[\"1\"],\"description\":\"Class control setting for fare filtering.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"taxesAndFees\",\"observed_value\":\"TaxesAndFees\",\"values_to_scan_for\":[\"TaxesAndFees\"],\"description\":\"Specifies how taxes and fees are handled in pricing.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"infantCount\",\"observed_value\":\"0\",\"values_to_scan_for\":[\"0\"],\"description\":\"Number of infants in the search.\"},{\"type\":\"argument\",\"requires_resolution\":true,\"name\":\"birthDates\",\"observed_value\":\"[]\",\"values_to_scan_for\":[\"[]\"],\"description\":\"Birthdates array for age-based pricing; empty in observed request.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"includeBundleAvailability\",\"observed_value\":\"true\",\"values_to_scan_for\":[\"true\"],\"description\":\"Whether to include bundle availability in the search results.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"includeWifiAvailability\",\"observed_value\":\"true\",\"values_to_scan_for\":[\"true\"],\"description\":\"Whether to include Wi-Fi availability in the search results.\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"originalJourneyKeys\",\"observed_value\":\"[]\",\"values_to_scan_for\":[\"[]\"],\"description\":\"Original journey keys (empty for new search).\"},{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"originalBookingRecordLocator\",\"observed_value\":\"null\",\"values_to_scan_for\":[\"null\"],\"description\":\"Original booking record locator (null for new search).\"}],\"explanation\":\"Variables were extracted from the request headers and JSON body of the identified v3/search POST. Dynamic items like Authorization token, stations, dates, passenger counts, and currency are marked requires_resolution=True. Static flags and configuration-like values (e.g., subscription key, filter modes, includeBundleAvailability) are marked requires_resolution=False. values_to_scan_for include actual values or distinctive substrings to locate the sources of these variables in storage or other transactions.\"}"
  },
  {
    "role": "user",
    "content": "Please resolve the variable: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJThe variable was found in the following storage sources: []The variable was found in the following transactions ids: ['20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token']These transactions are added to the vectorstore in full (including response bodies).Please respond in the following format: {'$defs': {'SessionStorageSource': {'description': 'Source of the session storage.', 'properties': {'type': {'$ref': '#/$defs/SessionStorageType', 'description': 'The type of the session storage.'}, 'dot_path': {'description': 'The dot path to the variable in the session storage.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['type', 'dot_path'], 'title': 'SessionStorageSource', 'type': 'object'}, 'SessionStorageType': {'enum': ['cookie', 'localStorage', 'sessionStorage'], 'title': 'SessionStorageType', 'type': 'string'}, 'TransactionSource': {'description': 'Source of the transaction.', 'properties': {'transaction_id': {'description': 'The ID of the transaction that contains the variable.', 'title': 'Transaction Id', 'type': 'string'}, 'dot_path': {'description': 'The dot path to the variable in the transaction response body.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['transaction_id', 'dot_path'], 'title': 'TransactionSource', 'type': 'object'}, 'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for resolving cookies and tokens.', 'properties': {'variable': {'$ref': '#/$defs/Variable'}, 'session_storage_source': {'anyOf': [{'$ref': '#/$defs/SessionStorageSource'}, {'type': 'null'}], 'default': None}, 'transaction_source': {'anyOf': [{'$ref': '#/$defs/TransactionSource'}, {'type': 'null'}], 'default': None}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['variable', 'explanation'], 'title': 'ResolvedVariableResponse', 'type': 'object'}Dot paths should be like this: 'key.data.items[0].id', 'path.to.valiable.0.value', etc.For paths in transaction responses, start with the first key of the response bodyFor paths in storage, start with the cookie, local storage, or session storage entry name"
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'SessionStorageSource': {'description': 'Source of the session storage.', 'properties': {'type': {'$ref': '#/$defs/SessionStorageType', 'description': 'The type of the session storage.'}, 'dot_path': {'description': 'The dot path to the variable in the session storage.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['type', 'dot_path'], 'title': 'SessionStorageSource', 'type': 'object'}, 'SessionStorageType': {'enum': ['cookie', 'localStorage', 'sessionStorage'], 'title': 'SessionStorageType', 'type': 'string'}, 'TransactionSource': {'description': 'Source of the transaction.', 'properties': {'transaction_id': {'description': 'The ID of the transaction that contains the variable.', 'title': 'Transaction Id', 'type': 'string'}, 'dot_path': {'description': 'The dot path to the variable in the transaction response body.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['transaction_id', 'dot_path'], 'title': 'TransactionSource', 'type': 'object'}, 'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for resolving cookies and tokens.', 'properties': {'variable': {'$ref': '#/$defs/Variable'}, 'session_storage_source': {'anyOf': [{'$ref': '#/$defs/SessionStorageSource'}, {'type': 'null'}], 'default': None}, 'transaction_source': {'anyOf': [{'$ref': '#/$defs/TransactionSource'}, {'type': 'null'}], 'default': None}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['variable', 'explanation'], 'title': 'ResolvedVariableResponse', 'type': 'object', 'variable': {'type': 'token', 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'Bearer JWT used to authorize the availability search request. Must be dynamically obtained and refreshed when expired.'}, 'session_storage_source': None, 'transaction_source': {'transaction_id': '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token', 'dot_path': 'token'}, 'explanation': 'The JWT is issued by the prod-token endpoint (transaction 20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token). Resolve it by calling this endpoint and reading the token field from the JSON response, then set it as the Authorization: Bearer header for subsequent availability searches.'}"
  },
  {
    "role": "assistant",
    "content": "{\"variable\":{\"type\":\"token\",\"requires_resolution\":true,\"name\":\"AuthorizationBearerToken\",\"observed_value\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\",\"values_to_scan_for\":[\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9\",\"ZXhwIjoxNzYxODY0ODc2\",\"KZYU5d88-7MUiPQ16Dt3\",\"fV873-CYZMl9UjcstvK\",\"QFhbk5JzA05OoZ4oGVfSNJ\"],\"description\":\"Bearer JWT used to authorize the availability search request. Must be dynamically obtained and refreshed when expired.\"},\"session_storage_source\":null,\"transaction_source\":{\"transaction_id\":\"20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token\",\"dot_path\":\"token\"},\"explanation\":\"The JWT is issued by the prod-token endpoint (transaction 20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token). Resolve it by calling this endpoint and reading the token field from the JSON response, then set it as the Authorization: Bearer header for subsequent availability searches.\"}"
  },
  {
    "role": "user",
    "content": "Please extract the variables from the requests of identified network transactions: [{'request': {'requestId': '5580.235', 'url': 'https://www.spirit.com/api/prod-token/api/v1/token', 'method': 'POST', 'type': 'XHR', 'requestHeaders': {'sec-ch-ua-platform': '\"macOS\"', 'Cache-Control': 'no-cache', 'Referer': 'https://www.spirit.com/', 'Pragma': 'no-cache', 'sec-ch-ua': '\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"', 'sec-ch-ua-mobile': '?0', 'Ocp-Apim-Subscription-Key': '3b6a6994753b4efc86376552e52b8432', 'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'}, 'postData': '{\"applicationName\":\"dotRezWeb\"}'}}, {'request': {'requestId': '5580.288', 'url': 'https://www.spirit.com/api/prod-token/api/v1/token', 'method': 'GET', 'type': 'XHR', 'requestHeaders': {'sec-ch-ua-platform': '\"macOS\"', 'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'Cache-Control': 'no-cache', 'Referer': 'https://www.spirit.com/', 'Accept-Language': 'en-US', 'Pragma': 'no-cache', 'sec-ch-ua': '\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"', 'sec-ch-ua-mobile': '?0', 'Ocp-Apim-Subscription-Key': '3b6a6994753b4efc86376552e52b8432', 'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'}}}]Please respond in the following format: {'$defs': {'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for extracting variables from the network transaction.', 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'variables': {'items': {'$ref': '#/$defs/Variable'}, 'title': 'Variables', 'type': 'array'}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['transaction_id', 'variables', 'explanation'], 'title': 'ExtractedVariableResponse', 'type': 'object'}Mark each variable with requires_resolution=True if we need to dynamically resolve this variable at runtime.If we can most likely hardcode this value, mark requires_resolution=False.system variables are related to the device or browser environment, and are not used to identify the user.token and cookie values are not used to identify the user: these may need to be resolved at runtime.Only the actual values of the variables (token/cookies, etc.) should be placed into the observed_value field.The values of values_to_scan_for will then be used to scan the storage and transactions for the source of the variable so only include the actual values of the variables.values_to_scan_for should be possible substrings that will likely be present in the response body of a network transaction or a storage entry value.This is necessary to figure out where the variable is coming from."
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for extracting variables from the network transaction.', 'properties': {'transaction_id': {'title': 'Transaction Id', 'type': 'string'}, 'variables': {'items': {'$ref': '#/$defs/Variable'}, 'title': 'Variables', 'type': 'array'}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['transaction_id', 'variables', 'explanation'], 'title': 'ExtractedVariableResponse', 'type': 'object', 'transaction_id': '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token', 'variables': [{'type': 'argument', 'requires_resolution': False, 'name': 'applicationName', 'observed_value': 'dotRezWeb', 'values_to_scan_for': ['dotRezWeb'], 'description': 'Application name sent in the token-issuance POST body.'}, {'type': 'token', 'requires_resolution': False, 'name': 'Ocp-Apim-Subscription-Key', 'observed_value': '3b6a6994753b4efc86376552e52b8432', 'values_to_scan_for': ['3b6a6994753b4efc86376552e52b8432', '3b6a6994', '52e52b8432'], 'description': 'Subscription key required by Spirit APIs; typically static for the web app.'}, {'type': 'token', 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'JWT used for Authorization: Bearer; must be dynamically obtained from the token service and refreshed when expired.'}], 'explanation': 'The prod-token POST includes applicationName=dotRezWeb in the JSON body and the Ocp-Apim-Subscription-Key header . The POST response returns the JWT at data.token, which is then used as the Authorization Bearer for subsequent requests, including the GET to the same endpoint and other APIs  .'}"
  },
  {
    "role": "assistant",
    "content": "{\"transaction_id\":\"20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token\",\"variables\":[{\"type\":\"argument\",\"requires_resolution\":false,\"name\":\"applicationName\",\"observed_value\":\"dotRezWeb\",\"values_to_scan_for\":[\"dotRezWeb\"],\"description\":\"Application name sent in the token-issuance POST body.\"},{\"type\":\"token\",\"requires_resolution\":false,\"name\":\"Ocp-Apim-Subscription-Key\",\"observed_value\":\"3b6a6994753b4efc86376552e52b8432\",\"values_to_scan_for\":[\"3b6a6994753b4efc86376552e52b8432\",\"3b6a6994\",\"52e52b8432\"],\"description\":\"Subscription key required by Spirit APIs; typically static for the web app.\"},{\"type\":\"token\",\"requires_resolution\":true,\"name\":\"AuthorizationBearerToken\",\"observed_value\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\",\"values_to_scan_for\":[\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9\",\"ZXhwIjoxNzYxODY0ODc2\",\"KZYU5d88-7MUiPQ16Dt3\",\"fV873-CYZMl9UjcstvK\",\"QFhbk5JzA05OoZ4oGVfSNJ\"],\"description\":\"JWT used for Authorization: Bearer; must be dynamically obtained from the token service and refreshed when expired.\"}],\"explanation\":\"The prod-token POST includes applicationName=dotRezWeb in the JSON body and the Ocp-Apim-Subscription-Key header . The POST response returns the JWT at data.token, which is then used as the Authorization Bearer for subsequent requests, including the GET to the same endpoint and other APIs  .\"}"
  },
  {
    "role": "user",
    "content": "Please resolve the variable: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJThe variable was found in the following storage sources: ['{\"type\": \"localStorageItemAdded\", \"origin\": \"https://www.spirit.com\", \"key\": \"token\", \"value\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\", \"timestamp\": 1761863976.68975}\\n', '{\"type\": \"localStorageItemAdded\", \"origin\": \"https://www.spirit.com\", \"key\": \"token\", \"value\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\", \"timestamp\": 1761863976.68975}\\n']The variable was found in the following transactions ids: []These transactions are added to the vectorstore in full (including response bodies).Please respond in the following format: {'$defs': {'SessionStorageSource': {'description': 'Source of the session storage.', 'properties': {'type': {'$ref': '#/$defs/SessionStorageType', 'description': 'The type of the session storage.'}, 'dot_path': {'description': 'The dot path to the variable in the session storage.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['type', 'dot_path'], 'title': 'SessionStorageSource', 'type': 'object'}, 'SessionStorageType': {'enum': ['cookie', 'localStorage', 'sessionStorage'], 'title': 'SessionStorageType', 'type': 'string'}, 'TransactionSource': {'description': 'Source of the transaction.', 'properties': {'transaction_id': {'description': 'The ID of the transaction that contains the variable.', 'title': 'Transaction Id', 'type': 'string'}, 'dot_path': {'description': 'The dot path to the variable in the transaction response body.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['transaction_id', 'dot_path'], 'title': 'TransactionSource', 'type': 'object'}, 'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for resolving cookies and tokens.', 'properties': {'variable': {'$ref': '#/$defs/Variable'}, 'session_storage_source': {'anyOf': [{'$ref': '#/$defs/SessionStorageSource'}, {'type': 'null'}], 'default': None}, 'transaction_source': {'anyOf': [{'$ref': '#/$defs/TransactionSource'}, {'type': 'null'}], 'default': None}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['variable', 'explanation'], 'title': 'ResolvedVariableResponse', 'type': 'object'}Dot paths should be like this: 'key.data.items[0].id', 'path.to.valiable.0.value', etc.For paths in transaction responses, start with the first key of the response bodyFor paths in storage, start with the cookie, local storage, or session storage entry name"
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'SessionStorageSource': {'description': 'Source of the session storage.', 'properties': {'type': {'$ref': '#/$defs/SessionStorageType', 'description': 'The type of the session storage.'}, 'dot_path': {'description': 'The dot path to the variable in the session storage.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['type', 'dot_path'], 'title': 'SessionStorageSource', 'type': 'object'}, 'SessionStorageType': {'enum': ['cookie', 'localStorage', 'sessionStorage'], 'title': 'SessionStorageType', 'type': 'string'}, 'TransactionSource': {'description': 'Source of the transaction.', 'properties': {'transaction_id': {'description': 'The ID of the transaction that contains the variable.', 'title': 'Transaction Id', 'type': 'string'}, 'dot_path': {'description': 'The dot path to the variable in the transaction response body.', 'title': 'Dot Path', 'type': 'string'}}, 'required': ['transaction_id', 'dot_path'], 'title': 'TransactionSource', 'type': 'object'}, 'Variable': {'description': 'A variable that was extracted from the network transaction.', 'properties': {'type': {'$ref': '#/$defs/VariableType'}, 'requires_resolution': {'description': 'Whether the variable requires resolution.', 'title': 'Requires Resolution', 'type': 'boolean'}, 'name': {'title': 'Name', 'type': 'string'}, 'observed_value': {'title': 'Observed Value', 'type': 'string'}, 'values_to_scan_for': {'items': {'type': 'string'}, 'title': 'Values To Scan For', 'type': 'array'}, 'description': {'title': 'Description', 'type': 'string'}}, 'required': ['type', 'requires_resolution', 'name', 'observed_value', 'values_to_scan_for', 'description'], 'title': 'Variable', 'type': 'object'}, 'VariableType': {'enum': ['argument', 'cookie', 'token', 'browser_variable'], 'title': 'VariableType', 'type': 'string'}}, 'description': 'Response from the LLM for resolving cookies and tokens.', 'properties': {'variable': {'$ref': '#/$defs/Variable'}, 'session_storage_source': {'anyOf': [{'$ref': '#/$defs/SessionStorageSource'}, {'type': 'null'}], 'default': None}, 'transaction_source': {'anyOf': [{'$ref': '#/$defs/TransactionSource'}, {'type': 'null'}], 'default': None}, 'explanation': {'title': 'Explanation', 'type': 'string'}}, 'required': ['variable', 'explanation'], 'title': 'ResolvedVariableResponse', 'type': 'object', 'variable': {'type': 'token', 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'Bearer JWT used to authorize Spirit API requests; must be dynamically obtained and refreshed as it expires.'}, 'session_storage_source': {'type': 'localStorage', 'dot_path': 'token'}, 'transaction_source': None, 'explanation': 'The JWT is stored in browser localStorage under the key token. Use localStorage.getItem(\\\"token\\\") to retrieve it at runtime and set it as the Authorization: Bearer header for subsequent API calls.'}"
  },
  {
    "role": "assistant",
    "content": "{\"variable\":{\"type\":\"token\",\"requires_resolution\":true,\"name\":\"AuthorizationBearerToken\",\"observed_value\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ\",\"values_to_scan_for\":[\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9\",\"ZXhwIjoxNzYxODY0ODc2\",\"KZYU5d88-7MUiPQ16Dt3\",\"fV873-CYZMl9UjcstvK\",\"QFhbk5JzA05OoZ4oGVfSNJ\"],\"description\":\"Bearer JWT used for Authorization: Bearer; must be dynamically obtained from the token service and refreshed when expired.\"},\"session_storage_source\":{\"type\":\"localStorage\",\"dot_path\":\"token\"},\"transaction_source\":null,\"explanation\":\"The JWT is stored in browser localStorage under the key token. Use localStorage.getItem(\\\"token\\\") to retrieve it at runtime and set it as the Authorization: Bearer header for subsequent API calls.\"}"
  },
  {
    "role": "user",
    "content": "Please construct the routine from the routine transactions: {'20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search': {'request': {'requestId': '5580.247', 'url': 'https://www.spirit.com/api/prod-availability/api/availability/v3/search', 'method': 'POST', 'type': 'XHR', 'requestHeaders': {'sec-ch-ua-platform': '\"macOS\"', 'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'Cache-Control': 'no-cache', 'Referer': 'https://www.spirit.com/', 'Accept-Language': 'en-US', 'Pragma': 'no-cache', 'sec-ch-ua': '\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"', 'sec-ch-ua-mobile': '?0', 'Ocp-Apim-Subscription-Key': '3b6a6994753b4efc86376552e52b8432', 'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'}, 'postData': '{\"includeWifiAvailability\":true,\"criteria\":[{\"stations\":{\"originStationCodes\":[\"BOS\"],\"destinationStationCodes\":[\"MIA\"],\"searchDestinationMacs\":false},\"dates\":{\"beginDate\":\"2025-10-31\",\"endDate\":\"2025-10-31\"},\"filters\":{\"filter\":\"Default\"}}],\"passengers\":{\"types\":[{\"type\":\"ADT\",\"count\":1}]},\"codes\":{\"currency\":\"USD\"},\"fareFilters\":{\"loyalty\":\"MonetaryOnly\",\"types\":[],\"classControl\":1},\"taxesAndFees\":\"TaxesAndFees\",\"originalJourneyKeys\":[],\"originalBookingRecordLocator\":null,\"infantCount\":0,\"birthDates\":[],\"includeBundleAvailability\":true}'}, 'extracted_variables': {'transaction_id': '20251030_1761863992142_www.spirit.com_api_prod-availability_api_availability_v3_search', 'variables': [{'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'eyJhbGciOiJSUzI1NiIsInR5cCI6Ik', 'KZYU5d88-7MUiPQ16Dt3', 'U1NJLjIifQ.bw8vxEnKZYU5d88', 'Zm9ydmF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ'], 'description': 'Bearer JWT used to authorize the availability search request. Expires and must be dynamically obtained.'}, {'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': False, 'name': 'Ocp-Apim-Subscription-Key', 'observed_value': '3b6a6994753b4efc86376552e52b8432', 'values_to_scan_for': ['3b6a6994753b4efc86376552e52b8432', '3b6a6994', '52e52b8432'], 'description': 'Public subscription key sent with Spirit APIs. Typically static for the web app; can often be hardcoded.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'originStationCode', 'observed_value': 'BOS', 'values_to_scan_for': ['BOS'], 'description': 'Origin IATA station code for one-way search.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'destinationStationCode', 'observed_value': 'MIA', 'values_to_scan_for': ['MIA'], 'description': 'Destination IATA station code for one-way search.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'beginDate', 'observed_value': '2025-10-31', 'values_to_scan_for': ['2025-10-31'], 'description': 'Departure date (start of search window).'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'endDate', 'observed_value': '2025-10-31', 'values_to_scan_for': ['2025-10-31'], 'description': 'Departure date (end of search window). Same as beginDate for one-way single-day search.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'searchDestinationMacs', 'observed_value': 'false', 'values_to_scan_for': ['false'], 'description': 'Flag in stations block; false in observed request.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'filters.filter', 'observed_value': 'Default', 'values_to_scan_for': ['Default'], 'description': 'Top-level criteria filter mode.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'passengerType', 'observed_value': 'ADT', 'values_to_scan_for': ['ADT'], 'description': 'Passenger type code (Adult).'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'passengerCount_ADT', 'observed_value': '1', 'values_to_scan_for': ['1'], 'description': 'Number of adult passengers.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'currency', 'observed_value': 'USD', 'values_to_scan_for': ['USD'], 'description': 'Pricing currency for the search results.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'fareFilters.loyalty', 'observed_value': 'MonetaryOnly', 'values_to_scan_for': ['MonetaryOnly'], 'description': 'Fare loyalty filter used for pricing results.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'fareFilters.classControl', 'observed_value': '1', 'values_to_scan_for': ['1'], 'description': 'Class control setting for fare filtering.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'taxesAndFees', 'observed_value': 'TaxesAndFees', 'values_to_scan_for': ['TaxesAndFees'], 'description': 'Specifies how taxes and fees are handled in pricing.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'infantCount', 'observed_value': '0', 'values_to_scan_for': ['0'], 'description': 'Number of infants in the search.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': True, 'name': 'birthDates', 'observed_value': '[]', 'values_to_scan_for': ['[]'], 'description': 'Birthdates array for age-based pricing; empty in observed request.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'includeBundleAvailability', 'observed_value': 'true', 'values_to_scan_for': ['true'], 'description': 'Whether to include bundle availability in the search results.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'includeWifiAvailability', 'observed_value': 'true', 'values_to_scan_for': ['true'], 'description': 'Whether to include Wi-Fi availability in the search results.'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'originalJourneyKeys', 'observed_value': '[]', 'values_to_scan_for': ['[]'], 'description': 'Original journey keys (empty for new search).'}, {'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'originalBookingRecordLocator', 'observed_value': 'null', 'values_to_scan_for': ['null'], 'description': 'Original booking record locator (null for new search).'}], 'explanation': 'Variables were extracted from the request headers and JSON body of the identified v3/search POST. Dynamic items like Authorization token, stations, dates, passenger counts, and currency are marked requires_resolution=True. Static flags and configuration-like values (e.g., subscription key, filter modes, includeBundleAvailability) are marked requires_resolution=False. values_to_scan_for include actual values or distinctive substrings to locate the sources of these variables in storage or other transactions.'}, 'resolved_variables': [{'variable': {'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'Bearer JWT used to authorize the availability search request. Must be dynamically obtained and refreshed when expired.'}, 'session_storage_source': None, 'transaction_source': {'transaction_id': '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token', 'dot_path': 'token'}, 'explanation': 'The JWT is issued by the prod-token endpoint (transaction 20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token). Resolve it by calling this endpoint and reading the token field from the JSON response, then set it as the Authorization: Bearer header for subsequent availability searches.'}]}, '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token': {'request': {'requestId': '5580.235', 'url': 'https://www.spirit.com/api/prod-token/api/v1/token', 'method': 'POST', 'type': 'XHR', 'requestHeaders': {'sec-ch-ua-platform': '\"macOS\"', 'Cache-Control': 'no-cache', 'Referer': 'https://www.spirit.com/', 'Pragma': 'no-cache', 'sec-ch-ua': '\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"', 'sec-ch-ua-mobile': '?0', 'Ocp-Apim-Subscription-Key': '3b6a6994753b4efc86376552e52b8432', 'Accept': 'application/json, text/plain, */*', 'Content-Type': 'application/json', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'}, 'postData': '{\"applicationName\":\"dotRezWeb\"}'}, 'extracted_variables': {'transaction_id': '20251030_1761863976366_www.spirit.com_api_prod-token_api_v1_token', 'variables': [{'type': <VariableType.ARGUMENT: 'argument'>, 'requires_resolution': False, 'name': 'applicationName', 'observed_value': 'dotRezWeb', 'values_to_scan_for': ['dotRezWeb'], 'description': 'Application name sent in the token-issuance POST body.'}, {'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': False, 'name': 'Ocp-Apim-Subscription-Key', 'observed_value': '3b6a6994753b4efc86376552e52b8432', 'values_to_scan_for': ['3b6a6994753b4efc86376552e52b8432', '3b6a6994', '52e52b8432'], 'description': 'Subscription key required by Spirit APIs; typically static for the web app.'}, {'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'JWT used for Authorization: Bearer; must be dynamically obtained from the token service and refreshed when expired.'}], 'explanation': 'The prod-token POST includes applicationName=dotRezWeb in the JSON body and the Ocp-Apim-Subscription-Key header . The POST response returns the JWT at data.token, which is then used as the Authorization Bearer for subsequent requests, including the GET to the same endpoint and other APIs  .'}, 'resolved_variables': [{'variable': {'type': <VariableType.TOKEN: 'token'>, 'requires_resolution': True, 'name': 'AuthorizationBearerToken', 'observed_value': 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyZjNmZjM1NC05ZDVmLTRjNzAtYmE5OC1jNjU0ODViMjlmYzQiLCJhdXRoX3RpbWUiOiIxNzYxODYzOTc2Iiwic2Vzc2lvbklEIjoiMCIsInRva2VuVHlwZSI6IiIsImFnZW50SUQiOiI0MzY4NTUwNyIsImRvbWFpbkNvZGUiOiJXVzIiLCJhZ2VudE5hbWUiOiJ3ZWJhbm9ueW1vdXMyIiwib3JnYW5pemF0aW9uQ29kZSI6Ik5LIiwicm9sZUNvZGUiOiJXV1dBIiwiY2hhbm5lbFR5cGUiOiJEaWdpdGFsQVBJIiwic3lzdGVtVHlwZSI6IjExOSIsImNsaWVudE5hbWUiOiJkb3RSZXpXZWIiLCJjdWx0dXJlQ29kZSI6ImVuLVVTIiwiY3VycmVuY3lDb2RlIjoiVVNEIiwibG9jYXRpb25Db2RlIjoiU1lTIiwicGVyc29uSUQiOiI0MzY5NDM1NCIsInBlcnNvblR5cGUiOiIyIiwic3dpdGNoIjoiIiwidHJhY2VMZXZlbCI6IjAiLCJ0cmFjZVN3aXRjaGVzIjoiMCIsImFnZW50UXVldWVDb2RlIjoiIiwib3JnYW5pemF0aW9uUXVldWVDb2RlIjoiIiwiZXhwIjoxNzYxODY0ODc2fQ.bw8vxEnKZYU5d88-7MUiPQ16Dt34LEqD37m8QItetO8WMbywhqmjnh4gjf2GV2q2cznpMZ-wBuJhoA7DyyPIUCO4217lrMtRbCrPMnb6hxYUFfV873-CYZMl9UjcstvKLd779uzn3FpyTEME8gQw35kLzZ14NLRiogiOkCfLYEFSXNBaRPkxj2TU4IwYsRoQ-lwXQaa97emtjW7oOB-uWiSFSzAuntmGK9NEHjkkgskc63IeuAu-2m00b5JTNOzM5x2IyBBgF4jf4_iCIg54e5k0UVW_sai4LHqC9twuethvPkxRMNwwGJjKvfv2c8R7Yz-evVj0xFaKul_bHf1cYz12FhV2-BGQb5ByqAsFI1w1s7J_iu66Z9e_B7PTh9h1m51-Zm75xEQ2mq-ZX2SvrStlgTkLeLUM7wN1FeJ96SYjDSWmiOftcGeWwxjnVZl8caSHVXE7bSJUlG1M6COxzz7QPRLitfhmsJgx5BA8pMQFhbk5JzA05OoZ4oGVfSNJ', 'values_to_scan_for': ['eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9', 'ZXhwIjoxNzYxODY0ODc2', 'KZYU5d88-7MUiPQ16Dt3', 'fV873-CYZMl9UjcstvK', 'QFhbk5JzA05OoZ4oGVfSNJ'], 'description': 'Bearer JWT used for Authorization: Bearer; must be dynamically obtained from the token service and refreshed when expired.'}, 'session_storage_source': {'type': <SessionStorageType.LOCAL_STORAGE: 'localStorage'>, 'dot_path': 'token'}, 'transaction_source': None, 'explanation': 'The JWT is stored in browser localStorage under the key token. Use localStorage.getItem(\"token\") to retrieve it at runtime and set it as the Authorization: Bearer header for subsequent API calls.'}]}}. Please respond in the following format: {'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod'}, 'headers': {'title': 'Headers', 'type': 'string'}, 'body': {'title': 'Body', 'type': 'string'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin'}}, 'required': ['url', 'description', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}, 'Parameter': {'description': 'Parameter model with comprehensive validation and type information.\\n\\nFields:\\n    name (str): Parameter name (must be valid Python identifier)\\n    required (bool): Whether parameter is required\\n    description (str): Human-readable parameter description\\n    default (str | None): Default value if not provided\\n    examples (list[str]): Example values', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'required': {'default': True, 'title': 'Required', 'type': 'boolean'}, 'description': {'title': 'Description', 'type': 'string'}, 'default': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'title': 'Default'}, 'examples': {'default': [], 'items': {'type': 'string'}, 'title': 'Examples', 'type': 'array'}}, 'required': ['name', 'description'], 'title': 'Parameter', 'type': 'object'}, 'RoutineFetchOperation': {'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}, 'RoutineNavigateOperation': {'description': 'Navigate operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.NAVIGATE]): The type of operation.\\n    url (str): The URL to navigate to.\\n\\nReturns:\\n    RoutineNavigateOperation: The interpolated operation.', 'properties': {'type': {'const': 'navigate', 'default': 'navigate', 'title': 'Type', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}}, 'required': ['url'], 'title': 'RoutineNavigateOperation', 'type': 'object'}, 'RoutineReturnOperation': {'description': 'Return operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.RETURN]): The type of operation.\\n    session_storage_key (str): The session storage key to return.\\n\\nReturns:\\n    RoutineReturnOperation: The interpolated operation.', 'properties': {'type': {'const': 'return', 'default': 'return', 'title': 'Type', 'type': 'string'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['session_storage_key'], 'title': 'RoutineReturnOperation', 'type': 'object'}, 'RoutineSleepOperation': {'description': 'Sleep operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.SLEEP]): The type of operation.\\n    timeout_seconds (float): The number of seconds to sleep.\\n\\nReturns:\\n    RoutineSleepOperation: The interpolated operation.', 'properties': {'type': {'const': 'sleep', 'default': 'sleep', 'title': 'Type', 'type': 'string'}, 'timeout_seconds': {'title': 'Timeout Seconds', 'type': 'number'}}, 'required': ['timeout_seconds'], 'title': 'RoutineSleepOperation', 'type': 'object'}}, 'description': 'Routine model with comprehensive parameter validation.', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'operations': {'items': {'anyOf': [{'$ref': '#/$defs/RoutineNavigateOperation'}, {'$ref': '#/$defs/RoutineSleepOperation'}, {'$ref': '#/$defs/RoutineFetchOperation'}, {'$ref': '#/$defs/RoutineReturnOperation'}]}, 'title': 'Operations', 'type': 'array'}, 'parameters': {'items': {'$ref': '#/$defs/Parameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['name', 'description', 'operations', 'parameters'], 'title': 'Routine', 'type': 'object'}. Fetch operations (1 to 1 with transactions) should be constructed as follows: {'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod'}, 'headers': {'title': 'Headers', 'type': 'string'}, 'body': {'title': 'Body', 'type': 'string'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin'}}, 'required': ['url', 'description', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}}, 'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}. First step of the routine should be to navigate to the target web page and sleep for a bit of time (2-3 seconds). All fetch operations should be constructed as follows: {'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod'}, 'headers': {'title': 'Headers', 'type': 'string'}, 'body': {'title': 'Body', 'type': 'string'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin'}}, 'required': ['url', 'description', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}}, 'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}. Parameters are only the most important arguments. You can inject variables by using the following syntax: {{parameter_name}} {{cookie:cookie_name}} {{sessionStorage:key.path.to.0.value}} {{local_storage:local_storage_name}}. You can hardcode unresolved variables to their observed values. You will want to navigate to the target page, then perform the fetch operations in the proper order. Browser variables should be hardcoded to observed values. If tokens or cookies are resolved, they should point to values in the session storage.You can navigate to other pages in the routine by using the navigate operation. Endpoints of the fetch operations should mimick observed network traffic requests! Every fetch operation result is written to session storage. At the end of the routine return the proper session storage value (likely containing the last fetch operation result). To feed output of a fetch into a subsequent fetch, you can save result to session storage and then use {sessionStorage:key.to.path}. "
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod'}, 'headers': {'title': 'Headers', 'type': 'string'}, 'body': {'title': 'Body', 'type': 'string'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin'}}, 'required': ['url', 'description', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}, 'Parameter': {'description': 'Parameter model with comprehensive validation and type information.\\n\\nFields:\\n    name (str): Parameter name (must be valid Python identifier)\\n    required (bool): Whether parameter is required\\n    description (str): Human-readable parameter description\\n    default (str | None): Default value if not provided\\n    examples (list[str]): Example values', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'required': {'default': True, 'title': 'Required', 'type': 'boolean'}, 'description': {'title': 'Description', 'type': 'string'}, 'default': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'title': 'Default'}, 'examples': {'default': [], 'items': {'type': 'string'}, 'title': 'Examples', 'type': 'array'}}, 'required': ['name', 'description'], 'title': 'Parameter', 'type': 'object'}, 'RoutineFetchOperation': {'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}, 'RoutineNavigateOperation': {'description': 'Navigate operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.NAVIGATE]): The type of operation.\\n    url (str): The URL to navigate to.\\n\\nReturns:\\n    RoutineNavigateOperation: The interpolated operation.', 'properties': {'type': {'const': 'navigate', 'default': 'navigate', 'title': 'Type', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}}, 'required': ['url'], 'title': 'RoutineNavigateOperation', 'type': 'object'}, 'RoutineReturnOperation': {'description': 'Return operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.RETURN]): The type of operation.\\n    session_storage_key (str): The session storage key to return.\\n\\nReturns:\\n    RoutineReturnOperation: The interpolated operation.', 'properties': {'type': {'const': 'return', 'default': 'return', 'title': 'Type', 'type': 'string'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['session_storage_key'], 'title': 'RoutineReturnOperation', 'type': 'object'}, 'RoutineSleepOperation': {'description': 'Sleep operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.SLEEP]): The type of operation.\\n    timeout_seconds (float): The number of seconds to sleep.\\n\\nReturns:\\n    RoutineSleepOperation: The interpolated operation.', 'properties': {'type': {'const': 'sleep', 'default': 'sleep', 'title': 'Type', 'type': 'string'}, 'timeout_seconds': {'title': 'Timeout Seconds', 'type': 'number'}}, 'required': ['timeout_seconds'], 'title': 'RoutineSleepOperation', 'type': 'object'}}, 'description': 'Routine model with comprehensive parameter validation.', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'operations': {'items': {'anyOf': [{'$ref': '#/$defs/RoutineNavigateOperation'}, {'$ref': '#/$defs/RoutineSleepOperation'}, {'$ref': '#/$defs/RoutineFetchOperation'}, {'$ref': '#/$defs/RoutineReturnOperation'}]}, 'title': 'Operations', 'type': 'array'}, 'parameters': {'items': {'$ref': '#/$defs/Parameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['name', 'description', 'operations', 'parameters'], 'title': 'Routine', 'type': 'object'}, 'name': 'spirit_one_way_search', 'description': 'Navigate to Spirit.com, obtain a bearer token, then call the availability v3 search API for one-way options and prices. The token is saved and injected into the Authorization header for the search call, mirroring observed traffic (token POST, then availability v3 search)  .', 'operations': [{'type': 'navigate', 'url': 'https://www.spirit.com/'}, {'type': 'sleep', 'timeout_seconds': 2.5}, {'type': 'fetch', 'endpoint': {'url': 'https://www.spirit.com/api/prod-token/api/v1/token', 'description': 'Issue JWT used for Authorization: Bearer; response contains data.token per capture .', 'method': 'POST', 'headers': '{\"sec-ch-ua-platform\":\"\\\\\"macOS\\\\\"\",\"Cache-Control\":\"no-cache\",\"Referer\":\"https://www.spirit.com/\",\"Pragma\":\"no-cache\",\"Ocp-Apim-Subscription-Key\":\"3b6a6994753b4efc86376552e52b8432\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"}', 'body': '{\"applicationName\":\"dotRezWeb\"}'}, 'session_storage_key': 'token_response'}, {'type': 'fetch', 'endpoint': {'url': 'https://www.spirit.com/api/prod-availability/api/availability/v3/search', 'description': 'One-way availability and prices for BOS->MIA on a single date; mirrors captured request and headers  .', 'method': 'POST', 'headers': '{\"sec-ch-ua-platform\":\"\\\\\"macOS\\\\\"\",\"Authorization\":\"Bearer {{sessionStorage:token_response.data.token}}\",\"Cache-Control\":\"no-cache\",\"Referer\":\"https://www.spirit.com/\",\"Accept-Language\":\"en-US\",\"Pragma\":\"no-cache\",\"Ocp-Apim-Subscription-Key\":\"3b6a6994753b4efc86376552e52b8432\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"}', 'body': '{\"includeWifiAvailability\":true,\"criteria\":[{\"stations\":{\"originStationCodes\":[\"{{origin}}\"],\"destinationStationCodes\":[\"{{destination}}\"],\"searchDestinationMacs\":false},\"dates\":{\"beginDate\":\"{{date}}\",\"endDate\":\"{{date}}\"},\"filters\":{\"filter\":\"Default\"}}],\"passengers\":{\"types\":[{\"type\":\"ADT\",\"count\":{{adt_count}}}]}, \"codes\":{\"currency\":\"{{currency}}\"},\"fareFilters\":{\"loyalty\":\"MonetaryOnly\",\"types\":[],\"classControl\":1},\"taxesAndFees\":\"TaxesAndFees\",\"originalJourneyKeys\":[],\"originalBookingRecordLocator\":null,\"infantCount\":0,\"birthDates\":[],\"includeBundleAvailability\":true}'}, 'session_storage_key': 'availability_search_response'}, {'type': 'return', 'session_storage_key': 'availability_search_response'}], 'parameters': [{'name': 'origin', 'description': 'Origin IATA station code for the one-way search.', 'default': 'BOS', 'examples': ['BOS', 'LAX', 'DTW']}, {'name': 'destination', 'description': 'Destination IATA station code for the one-way search.', 'default': 'MIA', 'examples': ['MIA', 'FLL', 'LAS']}, {'name': 'date', 'description': 'Departure date (YYYY-MM-DD). For one-way single-day search, beginDate=endDate=date.', 'default': '2025-10-31', 'examples': ['2025-10-31', '2025-11-15']}, {'name': 'adt_count', 'description': 'Number of adult (ADT) passengers.', 'default': '1', 'examples': ['1', '2']}, {'name': 'currency', 'description': 'Pricing currency code.', 'default': 'USD', 'examples': ['USD']}] }"
  },
  {
    "role": "assistant",
    "content": "{\"name\":\"spirit_one_way_search\",\"description\":\"Navigate to Spirit.com, obtain a bearer token, then call the availability v3 search API for one-way options and prices. The token is saved and injected into the Authorization header for the search call, mirroring observed traffic (token POST, then availability v3 search)  .\",\"operations\":[{\"type\":\"navigate\",\"url\":\"https://www.spirit.com/\"},{\"type\":\"sleep\",\"timeout_seconds\":2.5},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-token/api/v1/token\",\"description\":\"Issue JWT used for Authorization: Bearer; response contains data.token per capture .\",\"method\":\"POST\",\"headers\":\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"macOS\\\\\\\"\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",\\\"Referer\\\":\\\"https://www.spirit.com/\\\",\\\"Pragma\\\":\\\"no-cache\\\",\\\"Ocp-Apim-Subscription-Key\\\":\\\"3b6a6994753b4efc86376552e52b8432\\\",\\\"Accept\\\":\\\"application/json, text/plain, */*\\\",\\\"Content-Type\\\":\\\"application/json\\\",\\\"User-Agent\\\":\\\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\\\"}\",\"body\":\"{\\\"applicationName\\\":\\\"dotRezWeb\\\"}\",\"credentials\":\"same-origin\"},\"session_storage_key\":\"token_response\"},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-availability/api/availability/v3/search\",\"description\":\"One-way availability and prices for BOS->MIA on a single date; mirrors captured request and headers  .\",\"method\":\"POST\",\"headers\":\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"macOS\\\\\\\"\\\",\\\"Authorization\\\":\\\"Bearer {{sessionStorage:token_response.data.token}}\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",\\\"Referer\\\":\\\"https://www.spirit.com/\\\",\\\"Accept-Language\\\":\\\"en-US\\\",\\\"Pragma\\\":\\\"no-cache\\\",\\\"Ocp-Apim-Subscription-Key\\\":\\\"3b6a6994753b4efc86376552e52b8432\\\",\\\"Accept\\\":\\\"application/json, text/plain, */*\\\",\\\"Content-Type\\\":\\\"application/json\\\",\\\"User-Agent\\\":\\\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\\\"}\",\"body\":\"{\\\"includeWifiAvailability\\\":true,\\\"criteria\\\":[{\\\"stations\\\":{\\\"originStationCodes\\\":[\\\"{{origin}}\\\"],\\\"destinationStationCodes\\\":[\\\"{{destination}}\\\"],\\\"searchDestinationMacs\\\":false},\\\"dates\\\":{\\\"beginDate\\\":\\\"{{date}}\\\",\\\"endDate\\\":\\\"{{date}}\\\"},\\\"filters\\\":{\\\"filter\\\":\\\"Default\\\"}}],\\\"passengers\\\":{\\\"types\\\":[{\\\"type\\\":\\\"ADT\\\",\\\"count\\\":{{adt_count}}}]}, \\\"codes\\\":{\\\"currency\\\":\\\"{{currency}}\\\"},\\\"fareFilters\\\":{\\\"loyalty\\\":\\\"MonetaryOnly\\\",\\\"types\\\":[],\\\"classControl\\\":1},\\\"taxesAndFees\\\":\\\"TaxesAndFees\\\",\\\"originalJourneyKeys\\\":[],\\\"originalBookingRecordLocator\\\":null,\\\"infantCount\\\":0,\\\"birthDates\\\":[],\\\"includeBundleAvailability\\\":true}\",\"credentials\":\"same-origin\"},\"session_storage_key\":\"availability_search_response\"},{\"type\":\"return\",\"session_storage_key\":\"availability_search_response\"}],\"parameters\":[{\"name\":\"origin\",\"required\":true,\"description\":\"Origin IATA station code for the one-way search.\",\"default\":\"BOS\",\"examples\":[\"BOS\",\"LAX\",\"DTW\"]},{\"name\":\"destination\",\"required\":true,\"description\":\"Destination IATA station code for the one-way search.\",\"default\":\"MIA\",\"examples\":[\"MIA\",\"FLL\",\"LAS\"]},{\"name\":\"date\",\"required\":true,\"description\":\"Departure date (YYYY-MM-DD). For one-way single-day search, beginDate=endDate=date.\",\"default\":\"2025-10-31\",\"examples\":[\"2025-10-31\",\"2025-11-15\"]},{\"name\":\"adt_count\",\"required\":true,\"description\":\"Number of adult (ADT) passengers.\",\"default\":\"1\",\"examples\":[\"1\",\"2\"]},{\"name\":\"currency\",\"required\":true,\"description\":\"Pricing currency code.\",\"default\":\"USD\",\"examples\":[\"USD\"]}]}"
  },
  {
    "role": "user",
    "content": "Please productionize the routine (from previosu step): {\"name\":\"spirit_one_way_search\",\"description\":\"Navigate to Spirit.com, obtain a bearer token, then call the availability v3 search API for one-way options and prices. The token is saved and injected into the Authorization header for the search call, mirroring observed traffic (token POST, then availability v3 search)  .\",\"operations\":[{\"type\":\"navigate\",\"url\":\"https://www.spirit.com/\"},{\"type\":\"sleep\",\"timeout_seconds\":2.5},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-token/api/v1/token\",\"description\":\"Issue JWT used for Authorization: Bearer; response contains data.token per capture .\",\"method\":\"POST\",\"headers\":\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"macOS\\\\\\\"\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",\\\"Referer\\\":\\\"https://www.spirit.com/\\\",\\\"Pragma\\\":\\\"no-cache\\\",\\\"Ocp-Apim-Subscription-Key\\\":\\\"3b6a6994753b4efc86376552e52b8432\\\",\\\"Accept\\\":\\\"application/json, text/plain, */*\\\",\\\"Content-Type\\\":\\\"application/json\\\",\\\"User-Agent\\\":\\\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\\\"}\",\"body\":\"{\\\"applicationName\\\":\\\"dotRezWeb\\\"}\",\"credentials\":\"same-origin\"},\"session_storage_key\":\"token_response\"},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-availability/api/availability/v3/search\",\"description\":\"One-way availability and prices for BOS->MIA on a single date; mirrors captured request and headers  .\",\"method\":\"POST\",\"headers\":\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"macOS\\\\\\\"\\\",\\\"Authorization\\\":\\\"Bearer {{sessionStorage:token_response.data.token}}\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",\\\"Referer\\\":\\\"https://www.spirit.com/\\\",\\\"Accept-Language\\\":\\\"en-US\\\",\\\"Pragma\\\":\\\"no-cache\\\",\\\"Ocp-Apim-Subscription-Key\\\":\\\"3b6a6994753b4efc86376552e52b8432\\\",\\\"Accept\\\":\\\"application/json, text/plain, */*\\\",\\\"Content-Type\\\":\\\"application/json\\\",\\\"User-Agent\\\":\\\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\\\"}\",\"body\":\"{\\\"includeWifiAvailability\\\":true,\\\"criteria\\\":[{\\\"stations\\\":{\\\"originStationCodes\\\":[\\\"{{origin}}\\\"],\\\"destinationStationCodes\\\":[\\\"{{destination}}\\\"],\\\"searchDestinationMacs\\\":false},\\\"dates\\\":{\\\"beginDate\\\":\\\"{{date}}\\\",\\\"endDate\\\":\\\"{{date}}\\\"},\\\"filters\\\":{\\\"filter\\\":\\\"Default\\\"}}],\\\"passengers\\\":{\\\"types\\\":[{\\\"type\\\":\\\"ADT\\\",\\\"count\\\":{{adt_count}}}]}, \\\"codes\\\":{\\\"currency\\\":\\\"{{currency}}\\\"},\\\"fareFilters\\\":{\\\"loyalty\\\":\\\"MonetaryOnly\\\",\\\"types\\\":[],\\\"classControl\\\":1},\\\"taxesAndFees\\\":\\\"TaxesAndFees\\\",\\\"originalJourneyKeys\\\":[],\\\"originalBookingRecordLocator\\\":null,\\\"infantCount\\\":0,\\\"birthDates\\\":[],\\\"includeBundleAvailability\\\":true}\",\"credentials\":\"same-origin\"},\"session_storage_key\":\"availability_search_response\"},{\"type\":\"return\",\"session_storage_key\":\"availability_search_response\"}],\"parameters\":[{\"name\":\"origin\",\"required\":true,\"description\":\"Origin IATA station code for the one-way search.\",\"default\":\"BOS\",\"examples\":[\"BOS\",\"LAX\",\"DTW\"]},{\"name\":\"destination\",\"required\":true,\"description\":\"Destination IATA station code for the one-way search.\",\"default\":\"MIA\",\"examples\":[\"MIA\",\"FLL\",\"LAS\"]},{\"name\":\"date\",\"required\":true,\"description\":\"Departure date (YYYY-MM-DD). For one-way single-day search, beginDate=endDate=date.\",\"default\":\"2025-10-31\",\"examples\":[\"2025-10-31\",\"2025-11-15\"]},{\"name\":\"adt_count\",\"required\":true,\"description\":\"Number of adult (ADT) passengers.\",\"default\":\"1\",\"examples\":[\"1\",\"2\"]},{\"name\":\"currency\",\"required\":true,\"description\":\"Pricing currency code.\",\"default\":\"USD\",\"examples\":[\"USD\"]}]}You need to clean up this routine to follow the following format: {'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'description': 'Target API URL with parameter placeholders', 'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Human-readable description the fetch request', 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod', 'description': 'HTTP method'}, 'headers': {'additionalProperties': True, 'description': 'Dictionary of headers, with parameter placeholders for later interpolation', 'title': 'Headers', 'type': 'object'}, 'body': {'additionalProperties': True, 'description': 'Dictionary of request body, with parameter placeholders for later interpolation', 'title': 'Body', 'type': 'object'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin', 'description': 'Credentials mode'}}, 'required': ['url', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}, 'Parameter': {'description': \"Parameter model with comprehensive validation and type information.\\n\\nFields:\\n    name (str): Parameter name (must be valid Python identifier)\\n    type (ParameterType): Parameter data type\\n    required (bool): Whether parameter is required\\n    description (str): Human-readable parameter description\\n    default (Any | None): Default value if not provided\\n    examples (list[Any]): Example values\\n    min_length (int | None): Minimum length for strings\\n    max_length (int | None): Maximum length for strings\\n    min_value (int | float | None): Minimum value for numbers\\n    max_value (int | float | None): Maximum value for numbers\\n    pattern (str | None): Regex pattern for string validation\\n    enum_values (list[str] | None): Allowed values for enum type\\n    format (str | None): Format specification (e.g., 'YYYY-MM-DD')\", 'properties': {'name': {'description': 'Parameter name (must be valid Python identifier)', 'title': 'Name', 'type': 'string'}, 'type': {'$ref': '#/$defs/ParameterType', 'default': 'string', 'description': 'Parameter data type'}, 'required': {'default': True, 'description': 'Whether parameter is required', 'title': 'Required', 'type': 'boolean'}, 'description': {'description': 'Human-readable parameter description', 'title': 'Description', 'type': 'string'}, 'default': {'anyOf': [{}, {'type': 'null'}], 'default': None, 'description': 'Default value if not provided', 'title': 'Default'}, 'examples': {'description': 'Example values', 'items': {}, 'title': 'Examples', 'type': 'array'}, 'min_length': {'anyOf': [{'type': 'integer'}, {'type': 'null'}], 'default': None, 'description': 'Minimum length for strings', 'title': 'Min Length'}, 'max_length': {'anyOf': [{'type': 'integer'}, {'type': 'null'}], 'default': None, 'description': 'Maximum length for strings', 'title': 'Max Length'}, 'min_value': {'anyOf': [{'type': 'integer'}, {'type': 'number'}, {'type': 'null'}], 'default': None, 'description': 'Minimum value for numbers', 'title': 'Min Value'}, 'max_value': {'anyOf': [{'type': 'integer'}, {'type': 'number'}, {'type': 'null'}], 'default': None, 'description': 'Maximum value for numbers', 'title': 'Max Value'}, 'pattern': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Regex pattern for string validation', 'title': 'Pattern'}, 'enum_values': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'default': None, 'description': 'Allowed values for enum type', 'title': 'Enum Values'}, 'format': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': \"Format specification (e.g., 'YYYY-MM-DD')\", 'title': 'Format'}}, 'required': ['name', 'description'], 'title': 'Parameter', 'type': 'object'}, 'ParameterType': {'description': 'Supported parameter types for MCP tools.', 'enum': ['string', 'integer', 'number', 'boolean', 'date', 'datetime', 'email', 'url', 'enum'], 'title': 'ParameterType', 'type': 'string'}, 'RoutineFetchOperation': {'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}, 'RoutineNavigateOperation': {'description': 'Navigate operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.NAVIGATE]): The type of operation.\\n    url (str): The URL to navigate to.\\n\\nReturns:\\n    RoutineNavigateOperation: The interpolated operation.', 'properties': {'type': {'const': 'navigate', 'default': 'navigate', 'title': 'Type', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}}, 'required': ['url'], 'title': 'RoutineNavigateOperation', 'type': 'object'}, 'RoutineReturnOperation': {'description': 'Return operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.RETURN]): The type of operation.\\n    session_storage_key (str): The session storage key to return.\\n\\nReturns:\\n    RoutineReturnOperation: The interpolated operation.', 'properties': {'type': {'const': 'return', 'default': 'return', 'title': 'Type', 'type': 'string'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['session_storage_key'], 'title': 'RoutineReturnOperation', 'type': 'object'}, 'RoutineSleepOperation': {'description': 'Sleep operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.SLEEP]): The type of operation.\\n    timeout_seconds (float): The number of seconds to sleep.\\n\\nReturns:\\n    RoutineSleepOperation: The interpolated operation.', 'properties': {'type': {'const': 'sleep', 'default': 'sleep', 'title': 'Type', 'type': 'string'}, 'timeout_seconds': {'title': 'Timeout Seconds', 'type': 'number'}}, 'required': ['timeout_seconds'], 'title': 'RoutineSleepOperation', 'type': 'object'}}, 'description': 'Routine model with comprehensive parameter validation.', 'properties': {'id': {'description': 'Resource ID in format [resourceType]_[uuidv4]', 'title': 'Id', 'type': 'string'}, 'created_at': {'description': 'Unix timestamp (seconds) when resource was created', 'title': 'Created At', 'type': 'integer'}, 'updated_at': {'description': 'Unix timestamp (seconds) when resource was last updated', 'title': 'Updated At', 'type': 'integer'}, 'name': {'title': 'Name', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'operations': {'items': {'discriminator': {'mapping': {'fetch': '#/$defs/RoutineFetchOperation', 'navigate': '#/$defs/RoutineNavigateOperation', 'return': '#/$defs/RoutineReturnOperation', 'sleep': '#/$defs/RoutineSleepOperation'}, 'propertyName': 'type'}, 'oneOf': [{'$ref': '#/$defs/RoutineNavigateOperation'}, {'$ref': '#/$defs/RoutineSleepOperation'}, {'$ref': '#/$defs/RoutineFetchOperation'}, {'$ref': '#/$defs/RoutineReturnOperation'}]}, 'title': 'Operations', 'type': 'array'}, 'incognito': {'default': True, 'description': 'Whether to use incognito mode when executing the routine', 'title': 'Incognito', 'type': 'boolean'}, 'parameters': {'description': 'List of parameters', 'items': {'$ref': '#/$defs/Parameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['name', 'description', 'operations'], 'title': 'Routine', 'type': 'object'}Please respond in the following format: {'$defs': {'CREDENTIALS': {'description': 'Supported credentials modes for API requests.', 'enum': ['same-origin', 'include', 'omit'], 'title': 'CREDENTIALS', 'type': 'string'}, 'Endpoint': {'description': 'Endpoint model with comprehensive parameter validation.', 'properties': {'url': {'description': 'Target API URL with parameter placeholders', 'title': 'Url', 'type': 'string'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Human-readable description the fetch request', 'title': 'Description'}, 'method': {'$ref': '#/$defs/HTTPMethod', 'description': 'HTTP method'}, 'headers': {'additionalProperties': True, 'description': 'Dictionary of headers, with parameter placeholders for later interpolation', 'title': 'Headers', 'type': 'object'}, 'body': {'additionalProperties': True, 'description': 'Dictionary of request body, with parameter placeholders for later interpolation', 'title': 'Body', 'type': 'object'}, 'credentials': {'$ref': '#/$defs/CREDENTIALS', 'default': 'same-origin', 'description': 'Credentials mode'}}, 'required': ['url', 'method', 'headers', 'body'], 'title': 'Endpoint', 'type': 'object'}, 'HTTPMethod': {'description': 'Supported HTTP methods for API endpoints.', 'enum': ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], 'title': 'HTTPMethod', 'type': 'string'}, 'Parameter': {'description': \"Parameter model with comprehensive validation and type information.\\n\\nFields:\\n    name (str): Parameter name (must be valid Python identifier)\\n    type (ParameterType): Parameter data type\\n    required (bool): Whether parameter is required\\n    description (str): Human-readable parameter description\\n    default (Any | None): Default value if not provided\\n    examples (list[Any]): Example values\\n    min_length (int | None): Minimum length for strings\\n    max_length (int | None): Maximum length for strings\\n    min_value (int | float | None): Minimum value for numbers\\n    max_value (int | float | None): Maximum value for numbers\\n    pattern (str | None): Regex pattern for string validation\\n    enum_values (list[str] | None): Allowed values for enum type\\n    format (str | None): Format specification (e.g., 'YYYY-MM-DD')\", 'properties': {'name': {'description': 'Parameter name (must be valid Python identifier)', 'title': 'Name', 'type': 'string'}, 'type': {'$ref': '#/$defs/ParameterType', 'default': 'string', 'description': 'Parameter data type'}, 'required': {'default': True, 'description': 'Whether parameter is required', 'title': 'Required', 'type': 'boolean'}, 'description': {'description': 'Human-readable parameter description', 'title': 'Description', 'type': 'string'}, 'default': {'anyOf': [{}, {'type': 'null'}], 'default': None, 'description': 'Default value if not provided', 'title': 'Default'}, 'examples': {'description': 'Example values', 'items': {}, 'title': 'Examples', 'type': 'array'}, 'min_length': {'anyOf': [{'type': 'integer'}, {'type': 'null'}], 'default': None, 'description': 'Minimum length for strings', 'title': 'Min Length'}, 'max_length': {'anyOf': [{'type': 'integer'}, {'type': 'null'}], 'default': None, 'description': 'Maximum length for strings', 'title': 'Max Length'}, 'min_value': {'anyOf': [{'type': 'integer'}, {'type': 'number'}, {'type': 'null'}], 'default': None, 'description': 'Minimum value for numbers', 'title': 'Min Value'}, 'max_value': {'anyOf': [{'type': 'integer'}, {'type': 'number'}, {'type': 'null'}], 'default': None, 'description': 'Maximum value for numbers', 'title': 'Max Value'}, 'pattern': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Regex pattern for string validation', 'title': 'Pattern'}, 'enum_values': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'default': None, 'description': 'Allowed values for enum type', 'title': 'Enum Values'}, 'format': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': \"Format specification (e.g., 'YYYY-MM-DD')\", 'title': 'Format'}}, 'required': ['name', 'description'], 'title': 'Parameter', 'type': 'object'}, 'ParameterType': {'description': 'Supported parameter types for MCP tools.', 'enum': ['string', 'integer', 'number', 'boolean', 'date', 'datetime', 'email', 'url', 'enum'], 'title': 'ParameterType', 'type': 'string'}, 'RoutineFetchOperation': {'description': 'Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.', 'properties': {'type': {'const': 'fetch', 'default': 'fetch', 'title': 'Type', 'type': 'string'}, 'endpoint': {'$ref': '#/$defs/Endpoint'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['endpoint', 'session_storage_key'], 'title': 'RoutineFetchOperation', 'type': 'object'}, 'RoutineNavigateOperation': {'description': 'Navigate operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.NAVIGATE]): The type of operation.\\n    url (str): The URL to navigate to.\\n\\nReturns:\\n    RoutineNavigateOperation: The interpolated operation.', 'properties': {'type': {'const': 'navigate', 'default': 'navigate', 'title': 'Type', 'type': 'string'}, 'url': {'title': 'Url', 'type': 'string'}}, 'required': ['url'], 'title': 'RoutineNavigateOperation', 'type': 'object'}, 'RoutineReturnOperation': {'description': 'Return operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.RETURN]): The type of operation.\\n    session_storage_key (str): The session storage key to return.\\n\\nReturns:\\n    RoutineReturnOperation: The interpolated operation.', 'properties': {'type': {'const': 'return', 'default': 'return', 'title': 'Type', 'type': 'string'}, 'session_storage_key': {'title': 'Session Storage Key', 'type': 'string'}}, 'required': ['session_storage_key'], 'title': 'RoutineReturnOperation', 'type': 'object'}, 'RoutineSleepOperation': {'description': 'Sleep operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.SLEEP]): The type of operation.\\n    timeout_seconds (float): The number of seconds to sleep.\\n\\nReturns:\\n    RoutineSleepOperation: The interpolated operation.', 'properties': {'type': {'const': 'sleep', 'default': 'sleep', 'title': 'Type', 'type': 'string'}, 'timeout_seconds': {'title': 'Timeout Seconds', 'type': 'number'}}, 'required': ['timeout_seconds'], 'title': 'RoutineSleepOperation', 'type': 'object'}}, 'description': 'Routine model with comprehensive parameter validation.', 'properties': {'id': {'description': 'Resource ID in format [resourceType]_[uuidv4]', 'title': 'Id', 'type': 'string'}, 'created_at': {'description': 'Unix timestamp (seconds) when resource was created', 'title': 'Created At', 'type': 'integer'}, 'updated_at': {'description': 'Unix timestamp (seconds) when resource was last updated', 'title': 'Updated At', 'type': 'integer'}, 'name': {'title': 'Name', 'type': 'string'}, 'description': {'title': 'Description', 'type': 'string'}, 'operations': {'items': {'discriminator': {'mapping': {'fetch': '#/$defs/RoutineFetchOperation', 'navigate': '#/$defs/RoutineNavigateOperation', 'return': '#/$defs/RoutineReturnOperation', 'sleep': '#/$defs/RoutineSleepOperation'}, 'propertyName': 'type'}, 'oneOf': [{'$ref': '#/$defs/RoutineNavigateOperation'}, {'$ref': '#/$defs/RoutineSleepOperation'}, {'$ref': '#/$defs/RoutineFetchOperation'}, {'$ref': '#/$defs/RoutineReturnOperation'}]}, 'title': 'Operations', 'type': 'array'}, 'incognito': {'default': True, 'description': 'Whether to use incognito mode when executing the routine', 'title': 'Incognito', 'type': 'boolean'}, 'parameters': {'description': 'List of parameters', 'items': {'$ref': '#/$defs/Parameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['name', 'description', 'operations'], 'title': 'Routine', 'type': 'object'}You immediate output needs to be a valid JSON object that conforms to the production routine schema."
  },
  {
    "role": "assistant",
    "content": "{\n  \"$defs\": {\n    \"CREDENTIALS\": {\n      \"description\": \"Supported credentials modes for API requests.\",\n      \"enum\": [\n        \"same-origin\",\n        \"include\",\n        \"omit\"\n      ],\n      \"title\": \"CREDENTIALS\",\n      \"type\": \"string\"\n    },\n    \"Endpoint\": {\n      \"description\": \"Endpoint model with comprehensive parameter validation.\",\n      \"properties\": {\n        \"url\": {\n          \"description\": \"Target API URL with parameter placeholders\",\n          \"title\": \"Url\",\n          \"type\": \"string\"\n        },\n        \"description\": {\n          \"anyOf\": [\n            {\n              \"type\": \"string\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Human-readable description the fetch request\",\n          \"title\": \"Description\"\n        },\n        \"method\": {\n          \"$ref\": \"#/$defs/HTTPMethod\",\n          \"description\": \"HTTP method\"\n        },\n        \"headers\": {\n          \"additionalProperties\": true,\n          \"description\": \"Dictionary of headers, with parameter placeholders for later interpolation\",\n          \"title\": \"Headers\",\n          \"type\": \"object\"\n        },\n        \"body\": {\n          \"additionalProperties\": true,\n          \"description\": \"Dictionary of request body, with parameter placeholders for later interpolation\",\n          \"title\": \"Body\",\n          \"type\": \"object\"\n        },\n        \"credentials\": {\n          \"$ref\": \"#/$defs/CREDENTIALS\",\n          \"default\": \"same-origin\",\n          \"description\": \"Credentials mode\"\n        }\n      },\n      \"required\": [\n        \"url\",\n        \"method\",\n        \"headers\",\n        \"body\"\n      ],\n      \"title\": \"Endpoint\",\n      \"type\": \"object\"\n    },\n    \"HTTPMethod\": {\n      \"description\": \"Supported HTTP methods for API endpoints.\",\n      \"enum\": [\n        \"GET\",\n        \"POST\",\n        \"PUT\",\n        \"DELETE\",\n        \"PATCH\"\n      ],\n      \"title\": \"HTTPMethod\",\n      \"type\": \"string\"\n    },\n    \"Parameter\": {\n      \"description\": \"Parameter model with comprehensive validation and type information.\\n\\nFields:\\n    name (str): Parameter name (must be valid Python identifier)\\n    type (ParameterType): Parameter data type\\n    required (bool): Whether parameter is required\\n    description (str): Human-readable parameter description\\n    default (Any | None): Default value if not provided\\n    examples (list[Any]): Example values\\n    min_length (int | None): Minimum length for strings\\n    max_length (int | None): Maximum length for strings\\n    min_value (int | float | None): Minimum value for numbers\\n    max_value (int | float | None): Maximum value for numbers\\n    pattern (str | None): Regex pattern for string validation\\n    enum_values (list[str] | None): Allowed values for enum type\\n    format (str | None): Format specification (e.g., 'YYYY-MM-DD')\",\n      \"properties\": {\n        \"name\": {\n          \"description\": \"Parameter name (must be valid Python identifier)\",\n          \"title\": \"Name\",\n          \"type\": \"string\"\n        },\n        \"type\": {\n          \"$ref\": \"#/$defs/ParameterType\",\n          \"default\": \"string\",\n          \"description\": \"Parameter data type\"\n        },\n        \"required\": {\n          \"default\": true,\n          \"description\": \"Whether parameter is required\",\n          \"title\": \"Required\",\n          \"type\": \"boolean\"\n        },\n        \"description\": {\n          \"description\": \"Human-readable parameter description\",\n          \"title\": \"Description\",\n          \"type\": \"string\"\n        },\n        \"default\": {\n          \"anyOf\": [\n            {},\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Default value if not provided\",\n          \"title\": \"Default\"\n        },\n        \"examples\": {\n          \"description\": \"Example values\",\n          \"items\": {},\n          \"title\": \"Examples\",\n          \"type\": \"array\"\n        },\n        \"min_length\": {\n          \"anyOf\": [\n            {\n              \"type\": \"integer\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Minimum length for strings\",\n          \"title\": \"Min Length\"\n        },\n        \"max_length\": {\n          \"anyOf\": [\n            {\n              \"type\": \"integer\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Maximum length for strings\",\n          \"title\": \"Max Length\"\n        },\n        \"min_value\": {\n          \"anyOf\": [\n            {\n              \"type\": \"integer\"\n            },\n            {\n              \"type\": \"number\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Minimum value for numbers\",\n          \"title\": \"Min Value\"\n        },\n        \"max_value\": {\n          \"anyOf\": [\n            {\n              \"type\": \"integer\"\n            },\n            {\n              \"type\": \"number\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Maximum value for numbers\",\n          \"title\": \"Max Value\"\n        },\n        \"pattern\": {\n          \"anyOf\": [\n            {\n              \"type\": \"string\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Regex pattern for string validation\",\n          \"title\": \"Pattern\"\n        },\n        \"enum_values\": {\n          \"anyOf\": [\n            {\n              \"items\": {\n                \"type\": \"string\"\n              },\n              \"type\": \"array\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Allowed values for enum type\",\n          \"title\": \"Enum Values\"\n        },\n        \"format\": {\n          \"anyOf\": [\n            {\n              \"type\": \"string\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"description\": \"Format specification (e.g., 'YYYY-MM-DD')\",\n          \"title\": \"Format\"\n        }\n      },\n      \"required\": [\n        \"name\",\n        \"description\"\n      ],\n      \"title\": \"Parameter\",\n      \"type\": \"object\"\n    },\n    \"ParameterType\": {\n      \"description\": \"Supported parameter types for MCP tools.\",\n      \"enum\": [\n        \"string\",\n        \"integer\",\n        \"number\",\n        \"boolean\",\n        \"date\",\n        \"datetime\",\n        \"email\",\n        \"url\",\n        \"enum\"\n      ],\n      \"title\": \"ParameterType\",\n      \"type\": \"string\"\n    },\n    \"RoutineFetchOperation\": {\n      \"description\": \"Fetch operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.FETCH]): The type of operation.\\n    endpoint (Endpoint): The endpoint to fetch.\\n    session_storage_key (str | None): The session storage key to save the result to (optional).\\n\\nReturns:\\n    RoutineFetchOperation: The interpolated operation.\",\n      \"properties\": {\n        \"type\": {\n          \"const\": \"fetch\",\n          \"default\": \"fetch\",\n          \"title\": \"Type\",\n          \"type\": \"string\"\n        },\n        \"endpoint\": {\n          \"$ref\": \"#/$defs/Endpoint\"\n        },\n        \"session_storage_key\": {\n          \"title\": \"Session Storage Key\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"endpoint\",\n        \"session_storage_key\"\n      ],\n      \"title\": \"RoutineFetchOperation\",\n      \"type\": \"object\"\n    },\n    \"RoutineNavigateOperation\": {\n      \"description\": \"Navigate operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.NAVIGATE]): The type of operation.\\n    url (str): The URL to navigate to.\\n\\nReturns:\\n    RoutineNavigateOperation: The interpolated operation.\",\n      \"properties\": {\n        \"type\": {\n          \"const\": \"navigate\",\n          \"default\": \"navigate\",\n          \"title\": \"Type\",\n          \"type\": \"string\"\n        },\n        \"url\": {\n          \"title\": \"Url\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"url\"\n      ],\n      \"title\": \"RoutineNavigateOperation\",\n      \"type\": \"object\"\n    },\n    \"RoutineReturnOperation\": {\n      \"description\": \"Return operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.RETURN]): The type of operation.\\n    session_storage_key (str): The session storage key to return.\\n\\nReturns:\\n    RoutineReturnOperation: The interpolated operation.\",\n      \"properties\": {\n        \"type\": {\n          \"const\": \"return\",\n          \"default\": \"return\",\n          \"title\": \"Type\",\n          \"type\": \"string\"\n        },\n        \"session_storage_key\": {\n          \"title\": \"Session Storage Key\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"session_storage_key\"\n      ],\n      \"title\": \"RoutineReturnOperation\",\n      \"type\": \"object\"\n    },\n    \"RoutineSleepOperation\": {\n      \"description\": \"Sleep operation for routine.\\n\\nArgs:\\n    type (Literal[RoutineOperationTypes.SLEEP]): The type of operation.\\n    timeout_seconds (float): The number of seconds to sleep.\\n\\nReturns:\\n    RoutineSleepOperation: The interpolated operation.\",\n      \"properties\": {\n        \"type\": {\n          \"const\": \"sleep\",\n          \"default\": \"sleep\",\n          \"title\": \"Type\",\n          \"type\": \"string\"\n        },\n        \"timeout_seconds\": {\n          \"title\": \"Timeout Seconds\",\n          \"type\": \"number\"\n        }\n      },\n      \"required\": [\n        \"timeout_seconds\"\n      ],\n      \"title\": \"RoutineSleepOperation\",\n      \"type\": \"object\"\n    }\n  },\n  \"name\": \"spirit_one_way_search\",\n  \"description\": \"Navigate to Spirit.com, obtain a bearer token, then call the availability v3 search API for one-way options and prices. The token is saved and injected into the Authorization header for the search call, mirroring observed traffic.\",\n  \"operations\": [\n    {\n      \"type\": \"navigate\",\n      \"url\": \"https://www.spirit.com/\"\n    },\n    {\n      \"type\": \"sleep\",\n      \"timeout_seconds\": 2.5\n    },\n    {\n      \"type\": \"fetch\",\n      \"endpoint\": {\n        \"url\": \"https://www.spirit.com/api/prod-token/api/v1/token\",\n        \"description\": \"Issue a JWT used for Authorization: Bearer; response contains data.token.\",\n        \"method\": \"POST\",\n        \"headers\": {\n          \"sec-ch-ua-platform\": \"\\\"macOS\\\"\",\n          \"Cache-Control\": \"no-cache\",\n          \"Referer\": \"https://www.spirit.com/\",\n          \"Pragma\": \"no-cache\",\n          \"Ocp-Apim-Subscription-Key\": \"3b6a6994753b4efc86376552e52b8432\",\n          \"Accept\": \"application/json, text/plain, */*\",\n          \"Content-Type\": \"application/json\",\n          \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"\n        },\n        \"body\": {\n          \"applicationName\": \"dotRezWeb\"\n        },\n        \"credentials\": \"same-origin\"\n      },\n      \"session_storage_key\": \"token_response\"\n    },\n    {\n      \"type\": \"fetch\",\n      \"endpoint\": {\n        \"url\": \"https://www.spirit.com/api/prod-availability/api/availability/v3/search\",\n        \"description\": \"One-way availability and prices for a single date (beginDate=endDate).\",\n        \"method\": \"POST\",\n        \"headers\": {\n          \"sec-ch-ua-platform\": \"\\\"macOS\\\"\",\n          \"Authorization\": \"Bearer {{sessionStorage:token_response.data.token}}\",\n          \"Cache-Control\": \"no-cache\",\n          \"Referer\": \"https://www.spirit.com/\",\n          \"Accept-Language\": \"en-US\",\n          \"Pragma\": \"no-cache\",\n          \"Ocp-Apim-Subscription-Key\": \"3b6a6994753b4efc86376552e52b8432\",\n          \"Accept\": \"application/json, text/plain, */*\",\n          \"Content-Type\": \"application/json\",\n          \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"\n        },\n        \"body\": {\n          \"includeWifiAvailability\": true,\n          \"criteria\": [\n            {\n              \"stations\": {\n                \"originStationCodes\": [\n                  \"{{origin}}\"\n                ],\n                \"destinationStationCodes\": [\n                  \"{{destination}}\"\n                ],\n                \"searchDestinationMacs\": false\n              },\n              \"dates\": {\n                \"beginDate\": \"{{date}}\",\n                \"endDate\": \"{{date}}\"\n              },\n              \"filters\": {\n                \"filter\": \"Default\"\n              }\n            }\n          ],\n          \"passengers\": {\n            \"types\": [\n              {\n                \"type\": \"ADT\",\n                \"count\": \"{{adt_count}}\"\n              }\n            ]\n          },\n          \"codes\": {\n            \"currency\": \"{{currency}}\"\n          },\n          \"fareFilters\": {\n            \"loyalty\": \"MonetaryOnly\",\n            \"types\": [],\n            \"classControl\": 1\n          },\n          \"taxesAndFees\": \"TaxesAndFees\",\n          \"originalJourneyKeys\": [],\n          \"originalBookingRecordLocator\": null,\n          \"infantCount\": 0,\n          \"birthDates\": [],\n          \"includeBundleAvailability\": true\n        },\n        \"credentials\": \"same-origin\"\n      },\n      \"session_storage_key\": \"availability_search_response\"\n    },\n    {\n      \"type\": \"return\",\n      \"session_storage_key\": \"availability_search_response\"\n    }\n  ],\n  \"incognito\": true,\n  \"parameters\": [\n    {\n      \"name\": \"origin\",\n      \"type\": \"string\",\n      \"required\": true,\n      \"description\": \"Origin IATA station code for the one-way search.\",\n      \"default\": \"BOS\",\n      \"examples\": [\n        \"BOS\",\n        \"LAX\",\n        \"DTW\"\n      ],\n      \"min_length\": 3,\n      \"max_length\": 3,\n      \"pattern\": \"^[A-Z]{3}$\"\n    },\n    {\n      \"name\": \"destination\",\n      \"type\": \"string\",\n      \"required\": true,\n      \"description\": \"Destination IATA station code for the one-way search.\",\n      \"default\": \"MIA\",\n      \"examples\": [\n        \"MIA\",\n        \"FLL\",\n        \"LAS\"\n      ],\n      \"min_length\": 3,\n      \"max_length\": 3,\n      \"pattern\": \"^[A-Z]{3}$\"\n    },\n    {\n      \"name\": \"date\",\n      \"type\": \"date\",\n      \"required\": true,\n      \"description\": \"Departure date. For one-way single-day search, beginDate=endDate=date.\",\n      \"default\": \"2025-10-31\",\n      \"examples\": [\n        \"2025-10-31\",\n        \"2025-11-15\"\n      ],\n      \"format\": \"YYYY-MM-DD\"\n    },\n    {\n      \"name\": \"adt_count\",\n      \"type\": \"integer\",\n      \"required\": true,\n      \"description\": \"Number of adult (ADT) passengers.\",\n      \"default\": 1,\n      \"examples\": [\n        1,\n        2\n      ],\n      \"min_value\": 1\n    },\n    {\n      \"name\": \"currency\",\n      \"type\": \"string\",\n      \"required\": true,\n      \"description\": \"Pricing currency code.\",\n      \"default\": \"USD\",\n      \"examples\": [\n        \"USD\"\n      ],\n      \"min_length\": 3,\n      \"max_length\": 3,\n      \"pattern\": \"^[A-Z]{3}$\"\n    }\n  ]\n}"
  },
  {
    "role": "user",
    "content": "Write a dictionary of parameters to test this routine (from previous step): {\"id\":\"Routine_2c79b8f6-7d18-4854-a1b2-859bb184a344\",\"created_at\":1761882993,\"updated_at\":1761882993,\"name\":\"spirit_one_way_search\",\"description\":\"Navigate to Spirit.com, obtain a bearer token, then call the availability v3 search API for one-way options and prices. The token is saved and injected into the Authorization header for the search call, mirroring observed traffic.\",\"operations\":[{\"type\":\"navigate\",\"url\":\"https://www.spirit.com/\"},{\"type\":\"sleep\",\"timeout_seconds\":2.5},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-token/api/v1/token\",\"description\":\"Issue a JWT used for Authorization: Bearer; response contains data.token.\",\"method\":\"POST\",\"headers\":{\"sec-ch-ua-platform\":\"\\\"macOS\\\"\",\"Cache-Control\":\"no-cache\",\"Referer\":\"https://www.spirit.com/\",\"Pragma\":\"no-cache\",\"Ocp-Apim-Subscription-Key\":\"3b6a6994753b4efc86376552e52b8432\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"},\"body\":{\"applicationName\":\"dotRezWeb\"},\"credentials\":\"same-origin\"},\"session_storage_key\":\"token_response\"},{\"type\":\"fetch\",\"endpoint\":{\"url\":\"https://www.spirit.com/api/prod-availability/api/availability/v3/search\",\"description\":\"One-way availability and prices for a single date (beginDate=endDate).\",\"method\":\"POST\",\"headers\":{\"sec-ch-ua-platform\":\"\\\"macOS\\\"\",\"Authorization\":\"Bearer {{sessionStorage:token_response.data.token}}\",\"Cache-Control\":\"no-cache\",\"Referer\":\"https://www.spirit.com/\",\"Accept-Language\":\"en-US\",\"Pragma\":\"no-cache\",\"Ocp-Apim-Subscription-Key\":\"3b6a6994753b4efc86376552e52b8432\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\"},\"body\":{\"includeWifiAvailability\":true,\"criteria\":[{\"stations\":{\"originStationCodes\":[\"{{origin}}\"],\"destinationStationCodes\":[\"{{destination}}\"],\"searchDestinationMacs\":false},\"dates\":{\"beginDate\":\"{{date}}\",\"endDate\":\"{{date}}\"},\"filters\":{\"filter\":\"Default\"}}],\"passengers\":{\"types\":[{\"type\":\"ADT\",\"count\":\"{{adt_count}}\"}]},\"codes\":{\"currency\":\"{{currency}}\"},\"fareFilters\":{\"loyalty\":\"MonetaryOnly\",\"types\":[],\"classControl\":1},\"taxesAndFees\":\"TaxesAndFees\",\"originalJourneyKeys\":[],\"originalBookingRecordLocator\":null,\"infantCount\":0,\"birthDates\":[],\"includeBundleAvailability\":true},\"credentials\":\"same-origin\"},\"session_storage_key\":\"availability_search_response\"},{\"type\":\"return\",\"session_storage_key\":\"availability_search_response\"}],\"incognito\":true,\"parameters\":[{\"name\":\"origin\",\"type\":\"string\",\"required\":true,\"description\":\"Origin IATA station code for the one-way search.\",\"default\":\"BOS\",\"examples\":[\"BOS\",\"LAX\",\"DTW\"],\"min_length\":3,\"max_length\":3,\"min_value\":null,\"max_value\":null,\"pattern\":\"^[A-Z]{3}$\",\"enum_values\":null,\"format\":null},{\"name\":\"destination\",\"type\":\"string\",\"required\":true,\"description\":\"Destination IATA station code for the one-way search.\",\"default\":\"MIA\",\"examples\":[\"MIA\",\"FLL\",\"LAS\"],\"min_length\":3,\"max_length\":3,\"min_value\":null,\"max_value\":null,\"pattern\":\"^[A-Z]{3}$\",\"enum_values\":null,\"format\":null},{\"name\":\"date\",\"type\":\"date\",\"required\":true,\"description\":\"Departure date. For one-way single-day search, beginDate=endDate=date.\",\"default\":\"2025-10-31\",\"examples\":[\"2025-10-31\",\"2025-11-15\"],\"min_length\":null,\"max_length\":null,\"min_value\":null,\"max_value\":null,\"pattern\":null,\"enum_values\":null,\"format\":\"YYYY-MM-DD\"},{\"name\":\"adt_count\",\"type\":\"integer\",\"required\":true,\"description\":\"Number of adult (ADT) passengers.\",\"default\":1,\"examples\":[1,2],\"min_length\":null,\"max_length\":null,\"min_value\":1,\"max_value\":null,\"pattern\":null,\"enum_values\":null,\"format\":null},{\"name\":\"currency\",\"type\":\"string\",\"required\":true,\"description\":\"Pricing currency code.\",\"default\":\"USD\",\"examples\":[\"USD\"],\"min_length\":3,\"max_length\":3,\"min_value\":null,\"max_value\":null,\"pattern\":\"^[A-Z]{3}$\",\"enum_values\":null,\"format\":null}]}Please respond in the following format: {'$defs': {'TestParameter': {'description': 'A test parameter for a routine.', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'value': {'title': 'Value', 'type': 'string'}}, 'required': ['name', 'value'], 'title': 'TestParameter', 'type': 'object'}}, 'description': 'Response from the LLM for getting the test parameters for a routine.', 'properties': {'parameters': {'items': {'$ref': '#/$defs/TestParameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['parameters'], 'title': 'TestParametersResponse', 'type': 'object'}Ensure all parameters are present and have valid values."
  },
  {
    "role": "assistant",
    "content": "{'$defs': {'TestParameter': {'description': 'A test parameter for a routine.', 'properties': {'name': {'title': 'Name', 'type': 'string'}, 'value': {'title': 'Value', 'type': 'string'}}, 'required': ['name', 'value'], 'title': 'TestParameter', 'type': 'object'}}, 'description': 'Response from the LLM for getting the test parameters for a routine.', 'properties': {'parameters': {'items': {'$ref': '#/$defs/TestParameter'}, 'title': 'Parameters', 'type': 'array'}}, 'required': ['parameters'], 'title': 'TestParametersResponse', 'type': 'object', 'parameters': [{'name': 'origin', 'value': 'BOS'}, {'name': 'destination', 'value': 'MIA'}, {'name': 'date', 'value': '2025-10-31'}, {'name': 'adt_count', 'value': '1'}, {'name': 'currency', 'value': 'USD'}]}"
  },
  {
    "role": "assistant",
    "content": "{\"parameters\":[{\"name\":\"origin\",\"value\":\"BOS\"},{\"name\":\"destination\",\"value\":\"MIA\"},{\"name\":\"date\",\"value\":\"2025-10-31\"},{\"name\":\"adt_count\",\"value\":\"1\"},{\"name\":\"currency\",\"value\":\"USD\"}]}"
  }
]